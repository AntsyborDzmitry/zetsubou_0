{"version":3,"sources":["components/shipment/shipment-complete/notifications-dialog/notifications-dialog-service.js"],"names":[],"mappings":";;;qBAMwB,0BAA0B;;;;;;AAJlD,qBAAI,OAAO,CAAC,4BAA4B,EAAE,0BAA0B,CAAC,CAAC;;AAEtE,8BAA0B,CAAC,OAAO,GAAG,CAAC,OAAO,EAAE,IAAI,EAAE,YAAY,CAAC,CAAC;;AAEpD,aAAS,0BAA0B,CAAC,KAAK,EAAE,EAAE,EAAE,UAAU,EAAE;;AAEtE,YAAM,SAAS,GAAG;AACd,+BAAmB,EAAnB,mBAAmB;AACnB,uBAAW,EAAX,WAAW;SACd,CAAC;;AAEF,iBAAS,mBAAmB,CAAC,UAAU,EAAE,aAAa,EAAE;AACpD,gBAAM,IAAI,GAAG;AACT,sCAAsB,EAAE,EAAE;AAC1B,oCAAoB,EAAE,EAAE;aAC3B,CAAC;AACF,yBAAa,CAAC,OAAO,CAAC,UAAC,YAAY,EAAK;AACpC,wBAAQ,YAAY,CAAC,IAAI;AACrB,yBAAK,OAAO;AACR,4BAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC;AAC7B,iCAAK,EAAE,YAAY,CAAC,KAAK;AACzB,8CAAkB,EAAE,YAAY,CAAC,QAAQ;yBAC5C,CAAC,CAAC;AACH,8BAAM;AAAA,AACV,yBAAK,KAAK;AACN,4BAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC;AAC3B,4CAAgB,EAAE,YAAY,CAAC,SAAS;AACxC,iCAAK,EAAE,YAAY,CAAC,KAAK;AACzB,8CAAkB,EAAE,YAAY,CAAC,QAAQ;yBAC5C,CAAC,CAAC;AACH,8BAAM;AAAA,iBACb;aACJ,CAAC,CAAC;AACH,mBAAO,KAAK,CAAC,IAAI,oBAAkB,UAAU,oBAAiB,IAAI,CAAC,SACzD,CAAC,UAAC,QAAQ,EAAK;AACjB,0BAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AAC3B,uBAAO,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;aAC9B,CAAC,CAAC;SACV;;AAED,iBAAS,WAAW,GAAG;AACnB,mBAAO,KAAK,CAAC,GAAG,0EAA0E,CACrF,IAAI,CAAC,UAAC,QAAQ;uBAAK,QAAQ,CAAC,IAAI;aAAA,CAAC,SAC5B,CAAC,UAAC,QAAQ,EAAK;AACjB,0BAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AAC3B,uBAAO,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;aAC9B,CAAC,CAAC;SACV;;AAED,eAAO,SAAS,CAAC;KACpB","file":"components/shipment/shipment-complete/notifications-dialog/notifications-dialog-service.js","sourcesContent":["import ewf from 'ewf';\r\n\r\newf.service('notificationsDialogService', NotificationsDialogService);\r\n\r\nNotificationsDialogService.$inject = ['$http', '$q', 'logService'];\r\n\r\nexport default function NotificationsDialogService($http, $q, logService) {\r\n\r\n    const publicApi = {\r\n        submitNotifications,\r\n        getDefaults\r\n    };\r\n\r\n    function submitNotifications(shipmentId, notifications) {\r\n        const data = {\r\n            emailNotificationItems: [],\r\n            smsNotificationItems: []\r\n        };\r\n        notifications.forEach((notification) => {\r\n            switch (notification.type) {\r\n                case 'email':\r\n                    data.emailNotificationItems.push({\r\n                        email: notification.email,\r\n                        notificationEvents: notification.settings\r\n                    });\r\n                    break;\r\n                case 'sms':\r\n                    data.smsNotificationItems.push({\r\n                        phoneCountryCode: notification.phoneCode,\r\n                        phone: notification.phone,\r\n                        notificationEvents: notification.settings\r\n                    });\r\n                    break;\r\n            }\r\n        });\r\n        return $http.post(`/api/shipment/${shipmentId}/notification`, data)\r\n            .catch((response) => {\r\n                logService.error(response);\r\n                return $q.reject(response);\r\n            });\r\n    }\r\n\r\n    function getDefaults() {\r\n        return $http.get(`/api/myprofile/notification/settings?fetchScope=RECIPIENT_NOTIFICATION`)\r\n            .then((response) => response.data)\r\n            .catch((response) => {\r\n                logService.error(response);\r\n                return $q.reject(response);\r\n            });\r\n    }\r\n\r\n    return publicApi;\r\n}\r\n"],"sourceRoot":"/source/"}