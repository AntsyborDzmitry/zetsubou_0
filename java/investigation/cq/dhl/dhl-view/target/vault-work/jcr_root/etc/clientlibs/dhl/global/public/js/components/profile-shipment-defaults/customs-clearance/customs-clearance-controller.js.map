{"version":3,"sources":["components/profile-shipment-defaults/customs-clearance/customs-clearance-controller.js"],"names":[],"mappings":"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","file":"components/profile-shipment-defaults/customs-clearance/customs-clearance-controller.js","sourcesContent":["import './../../../services/ewf-crud-service';\r\nimport './../../../services/navigation-service';\r\n\r\nCustomsClearanceController.$inject = ['ewfCrudService', 'navigationService'];\r\n\r\nexport default function CustomsClearanceController(\r\n    ewfCrudService,\r\n    navigationService) {\r\n\r\n    const vm = this;\r\n    const customsClearanceUrl = '/api/myprofile/shipment/defaults/customs/clearance';\r\n    const customClearanceSection = 'customsClearance';\r\n    let customClearanceDefault;\r\n\r\n    Object.assign(vm, {\r\n        editMode: false,\r\n        selectedShipmentPurpose: {},\r\n        selectedIncoterm: {},\r\n        init,\r\n        getCustomsClearance,\r\n        updateCustomsClearance,\r\n        resetToDefault,\r\n        resetInvoiceType,\r\n        toggleEditMode,\r\n        setSelectedValues,\r\n        getSelectedShipmentPurpose,\r\n        getSelectedIncoterm\r\n    });\r\n\r\n    function init() {\r\n        const section = navigationService.getParamFromUrl('section');\r\n        vm.editMode = section === customClearanceSection;\r\n        vm.getCustomsClearance()\r\n            .then((customClearanceOptions) => {\r\n                customClearanceDefault = angular.copy(customClearanceOptions);\r\n                vm.customsClearance = customClearanceOptions;\r\n                vm.customsClearance.shipmentValue = vm.customsClearance.shipmentValue || '0.00';\r\n                vm.setSelectedValues();\r\n            });\r\n    }\r\n\r\n    function getCustomsClearance() {\r\n        return ewfCrudService.getElementList(customsClearanceUrl);\r\n    }\r\n\r\n    function updateCustomsClearance() {\r\n        vm.customsClearance.selectedShipmentPurpose = vm.selectedShipmentPurpose\r\n            ? vm.selectedShipmentPurpose.key\r\n            : '';\r\n        vm.customsClearance.selectedIncoterm = vm.selectedIncoterm\r\n            ? vm.selectedIncoterm.key\r\n            : '';\r\n\r\n        ewfCrudService.updateElement(customsClearanceUrl, vm.customsClearance)\r\n            .then(() => {\r\n                customClearanceDefault = angular.copy(vm.customsClearance);\r\n                vm.editMode = false;\r\n            });\r\n    }\r\n\r\n    function resetToDefault() {\r\n        Object.assign(vm, {\r\n            customsClearance: angular.copy(customClearanceDefault),\r\n            editMode: false\r\n        });\r\n        vm.setSelectedValues();\r\n    }\r\n\r\n    function resetInvoiceType() {\r\n        vm.customsClearance.invoiceType = 'NONE';\r\n    }\r\n\r\n    function toggleEditMode() {\r\n        vm.editMode = !vm.editMode;\r\n    }\r\n\r\n    function setSelectedValues() {\r\n        Object.assign(vm, {\r\n            selectedShipmentPurpose: vm.getSelectedShipmentPurpose(),\r\n            selectedIncoterm: vm.getSelectedIncoterm()\r\n        });\r\n    }\r\n\r\n    function getSelectedShipmentPurpose() {\r\n        const comparator = (purpose) => purpose.key === vm.customsClearance.selectedShipmentPurpose;\r\n        return vm.customsClearance.shipmentPurposes.find(comparator);\r\n    }\r\n\r\n    function getSelectedIncoterm() {\r\n        const comparator = (incoterm) => incoterm.key === vm.customsClearance.selectedIncoterm;\r\n        return vm.customsClearance.incoterms.find(comparator);\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}