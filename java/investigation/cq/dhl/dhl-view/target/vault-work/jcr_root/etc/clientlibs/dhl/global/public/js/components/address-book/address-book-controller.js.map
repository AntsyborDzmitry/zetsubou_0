{"version":3,"sources":["components/address-book/address-book-controller.js"],"names":[],"mappings":";;;qBAawB,qBAAqB;;AAV7C,yBAAqB,CAAC,OAAO,GAAG,CAC5B,IAAI,EACJ,QAAQ,EACR,QAAQ,EACR,cAAc,EACd,4BAA4B,EAC5B,YAAY,EACZ,mBAAmB,CACtB,CAAC;;AAEa,aAAS,qBAAqB,CACzC,EAAE,EACF,MAAM,EACN,MAAM,EACN,YAAY,EACZ,0BAA0B,EAC1B,UAAU,EACV,iBAAiB,EAAE;AACnB,YAAM,EAAE,GAAG,IAAI,CAAC;;AAEhB,YAAM,uBAAuB,GAAG,CAAC,UAAU,EAAE,aAAa,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;;AAE1F,UAAE,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;AAC3C,UAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC;AACzB,UAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC;;AAEzB,UAAE,CAAC,WAAW,GAAG,WAAW,CAAC;AAC7B,UAAE,CAAC,YAAY,GAAG,YAAY,CAAC;AAC/B,UAAE,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;AAC7C,UAAE,CAAC,OAAO,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC;;AAE9B,uBAAe,EAAE,CAAC;;AAElB,iBAAS,eAAe,GAAG;AACvB,gBAAM,OAAO,GAAG,0BAA0B,CAAC,cAAc,EAAE,CACtD,IAAI,CAAC,UAAC,YAAY,EAAK;AACpB,kBAAE,CAAC,gBAAgB,GAAG,YAAY,CAAC,SAAS,CAAC;AAC7C,uBAAO,YAAY,CAAC,SAAS,CAAC;AAC9B,oBAAM,mBAAmB,GAAG,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAC,MAAM;2BACvD,UAAU,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC;iBAAA,CAC1C,CAAC;AACF,kBAAE,CAAC,GAAG,CAAC,mBAAmB,CAAC,CACtB,IAAI,CAAC,UAAC,YAAY,EAAK;AACpB,gCAAY,CAAC,OAAO,CAAC,UAAC,eAAe,EAAE,KAAK;+BACxC,EAAE,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,eAAe,GAAG,eAAe;qBAAA,CAC/D,CAAC;AACF,sBAAE,CAAC,gBAAgB,GAAG,EAAE,CAAC,OAAO,GAC1B,0BAA0B,CAAC,EAAE,CAAC,gBAAgB,CAAC,GAC/C,UAAU,CAAC,YAAY,CAAC,CAAC;iBAClC,CAAC,CAAC;aACV,CAAC,CAAC;AACP,mBAAO,iBAAiB,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;SAClD;;AAED,iBAAS,YAAY,CAAC,OAAO,EAAE;AAC3B,cAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;SACrC;;AAED,iBAAS,kBAAkB,CAAC,WAAW,EAAE;AACrC,cAAE,CAAC,QAAQ,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;SAC/C;;AAED,iBAAS,WAAW,CAAC,SAAS,EAAE,KAAK,EAAE;AACnC,wBAAY,CAAC,OAAO,CAAC,MAAM,EAAE,MAAM,EAAE,aAAa,EAAE,EAAC,UAAU,EAAE,SAAS,EAAE,MAAM,EAAE,KAAK,EAAC,CAAC,CAAC;SAC/F;;AAED,iBAAS,mBAAmB,CAAC,eAAe,EAAE;AAC1C,cAAE,CAAC,gBAAgB,GAAG,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,UAAC,MAAM;uBAAK,eAAe,CAAC,MAAM,CAAC;aAAA,CAAC,CAAC;AAC5F,sCAA0B,CAAC,iBAAiB,CAAC,eAAe,CAAC,CAAC;SACjE;;AAED,iBAAS,UAAU,CAAC,YAAY,EAAE;AAC9B,mBAAO,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,UAAC,MAAM;uBAAK,YAAY,CAAC,MAAM,CAAC;aAAA,CAAC,CAAC;SAC1E;;AAED,iBAAS,0BAA0B,CAAC,gBAAgB,EAAE;AAClD,gBAAM,aAAa,GAAG,SAAhB,aAAa,CAAI,UAAU;uBAAK,gBAAgB,CAAC,IAAI,CAAC,UAAC,UAAU;2BAAK,UAAU,CAAC,KAAK,KAAK,UAAU;iBAAA,CAAC;aAAA,CAAC;AAC7G,mBAAO,uBAAuB,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;SACrD;KACJ","file":"components/address-book/address-book-controller.js","sourcesContent":["import './../../services/attrs-service';\r\nimport './column-customization/column-customization-service';\r\n\r\nAddressBookController.$inject = [\r\n    '$q',\r\n    '$scope',\r\n    '$attrs',\r\n    'attrsService',\r\n    'columnCustomizationService',\r\n    'nlsService',\r\n    'ewfSpinnerService'\r\n];\r\n\r\nexport default function AddressBookController(\r\n    $q,\r\n    $scope,\r\n    $attrs,\r\n    attrsService,\r\n    columnCustomizationService,\r\n    nlsService,\r\n    ewfSpinnerService) {\r\n    const vm = this;\r\n\r\n    const defaultColumnsToDisplay = ['nickName', 'contactName', 'address', 'city', 'country'];\r\n\r\n    vm.bulkDeleteElements = bulkDeleteElements;\r\n    vm.gridActionStatus = {};\r\n    vm.notificationData = '';\r\n\r\n    vm.onSelection = onSelection;\r\n    vm.handleSearch = handleSearch;\r\n    vm.handleColumnsChange = handleColumnsChange;\r\n    vm.isPopup = !!$attrs.isPopup;\r\n\r\n    populateColumns();\r\n\r\n    function populateColumns() {\r\n        const promise = columnCustomizationService.getColumnsInfo()\r\n            .then((responseData) => {\r\n                vm.availableColumns = responseData.available;\r\n                delete responseData.available;\r\n                const translationPromises = vm.availableColumns.map((column) =>\r\n                    nlsService.getTranslation(column.title)\r\n                );\r\n                $q.all(translationPromises)\r\n                    .then((translations) => {\r\n                        translations.forEach((translatedTitle, index) =>\r\n                            vm.availableColumns[index].translatedTitle = translatedTitle\r\n                        );\r\n                        vm.columnsToDisplay = vm.isPopup\r\n                            ? mapDefaultColumnsToDisplay(vm.availableColumns)\r\n                            : mapColumns(responseData);\r\n                    });\r\n            });\r\n        return ewfSpinnerService.applySpinner(promise);\r\n    }\r\n\r\n    function handleSearch(newData) {\r\n        vm.gridCtrl.handleSearch(newData);\r\n    }\r\n\r\n    function bulkDeleteElements(messageCode) {\r\n        vm.gridCtrl.bulkDeleteElements(messageCode);\r\n    }\r\n\r\n    function onSelection(selection, index) {\r\n        attrsService.trigger($scope, $attrs, 'onSelection', {$selection: selection, $index: index});\r\n    }\r\n\r\n    function handleColumnsChange(selectedColumns) {\r\n        vm.columnsToDisplay = Object.keys(selectedColumns).map((column) => selectedColumns[column]);\r\n        columnCustomizationService.updateColumnsInfo(selectedColumns);\r\n    }\r\n\r\n    function mapColumns(responseData) {\r\n        return Object.keys(responseData).map((column) => responseData[column]);\r\n    }\r\n\r\n    function mapDefaultColumnsToDisplay(availableColumns) {\r\n        const mapDefColumns = (columnName) => availableColumns.find((columnData) => columnData.alias === columnName);\r\n        return defaultColumnsToDisplay.map(mapDefColumns);\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}