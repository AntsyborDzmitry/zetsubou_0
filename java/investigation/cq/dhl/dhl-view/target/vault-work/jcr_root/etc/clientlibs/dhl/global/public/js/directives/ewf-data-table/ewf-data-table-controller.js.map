{"version":3,"sources":["directives/ewf-data-table/ewf-data-table-controller.js"],"names":[],"mappings":"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","file":"directives/ewf-data-table/ewf-data-table-controller.js","sourcesContent":["import ewf from 'ewf';\r\n\r\newf.controller('EwfDataTableController', EwfDataTableController);\r\n\r\nEwfDataTableController.$inject = ['$scope'];\r\n\r\nexport default function EwfDataTableController($scope) {\r\n    const vm = this;\r\n\r\n    Object.assign(vm, {\r\n        setData,\r\n        getSorting,\r\n        setSorting,\r\n        getSelectedData,\r\n        hasSelectedData,\r\n        changeSelection,\r\n        getViewData\r\n    });\r\n\r\n    $scope.$parent.ewfDataTableCtrl = vm;\r\n\r\n    let data = [];\r\n    $scope.$watchCollection('data', (value) => {\r\n        setData(value);\r\n    });\r\n\r\n    function setData(value) {\r\n        data = value || [];\r\n        applySorting();\r\n    }\r\n\r\n    let sorting;\r\n    $scope.$watch('sorting', (value) => {\r\n        setSorting(value);\r\n    }, true);\r\n\r\n    function getSorting() {\r\n        return sorting;\r\n    }\r\n\r\n    function setSorting(value) {\r\n        sorting = value;\r\n        applySorting();\r\n    }\r\n\r\n    let viewData;\r\n\r\n    function isSortingNeeded() {\r\n        return sorting && sorting.property && sorting.direction && data.length;\r\n    }\r\n\r\n    function applySorting() {\r\n        if (!isSortingNeeded()) {\r\n            viewData = data;\r\n            return;\r\n        }\r\n        const {property, direction} = sorting;\r\n        const order = direction === 'asc' ? 1 : -1;\r\n        viewData = data.sort((itemA, itemB) => {\r\n            const itemAPropValue = itemA[property], itemBPropValue = itemB[property];\r\n            if (angular.isUndefined(itemAPropValue) || (itemAPropValue === null) || (itemAPropValue > itemBPropValue)) {\r\n                return order;\r\n            }\r\n            if (angular.isUndefined(itemBPropValue) || (itemBPropValue === null) || (itemBPropValue > itemAPropValue)) {\r\n                return -order;\r\n            }\r\n            return 0;\r\n        });\r\n    }\r\n\r\n    function getSelectedData() {\r\n        return data.filter((item) => item.dataTableSelected);\r\n    }\r\n\r\n    function hasSelectedData() {\r\n        return data.some((item) => item.dataTableSelected);\r\n    }\r\n\r\n    function changeSelection(value) {\r\n        data.forEach((item) => {\r\n            item.dataTableSelected = !!value;\r\n        });\r\n    }\r\n\r\n    function getViewData() {\r\n        return viewData;\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}