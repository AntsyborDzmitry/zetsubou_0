{"version":3,"sources":["components/profile-shipment-defaults/insurance/shipment-insurance-controller.js"],"names":[],"mappings":";;;qBAOwB,2BAA2B;;;;;;AAFnD,+BAA2B,CAAC,OAAO,GAAG,CAAC,QAAQ,EAAE,IAAI,EAAE,wBAAwB,EAAE,YAAY,EAAE,mBAAmB,CAAC,CAAC;;AAErG,aAAS,2BAA2B,CAAC,MAAM,EAAE,EAAE,EAAE,sBAAsB,EAAE,UAAU,EAAE,iBAAiB,EAAE;AACnH,YAAM,EAAE,GAAG,IAAI,CAAC;AAChB,YAAM,iCAAiC,GAAG,oBAAoB,CAAC;;AAE/D,6BAAQ,MAAM,CAAC,EAAE,EAAE;AACf,qBAAS,EAAE,KAAK;AAChB,+BAAmB,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC;;AAEnC,sBAAU,EAAV,UAAU;AACV,mCAAuB,EAAvB,uBAAuB;AACvB,iCAAqB,EAArB,qBAAqB;AACrB,wBAAY,EAAZ,YAAY;SACf,CAAC,CAAC;;AAEH,UAAE,CAAC,UAAU,EAAE,CAAC;;AAEhB,8BAAsB,CAAC,oBAAoB,EAAE,CACxC,IAAI,CAAC,UAAC,QAAQ,EAAK;AAChB,cAAE,CAAC,eAAe,GAAG,QAAQ,CAAC,eAAe,CAAC;AAC9C,cAAE,CAAC,kBAAkB,GAAG,QAAQ,CAAC,kBAAkB,CAAC;AACpD,cAAE,CAAC,cAAc,GAAG,QAAQ,CAAC,cAAc,CAAC;AAC5C,cAAE,CAAC,iBAAiB,GAAG,CAAC,QAAQ,CAAC,iBAAiB,GAC5C,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,GACzB,QAAQ,CAAC,iBAAiB,CAAC;SACpC,CAAC,CAAC;;AAEP,iBAAS,uBAAuB,GAAG;AAC/B,gBAAM,uBAAuB,GAAG;AAC5B,+BAAe,EAAE,EAAE,CAAC,eAAe;AACnC,kCAAkB,EAAE,EAAE,CAAC,kBAAkB;AACzC,8BAAc,EAAE,EAAE,CAAC,cAAc;AACjC,iCAAiB,EAAE,EAAE,CAAC,iBAAiB;aAC1C,CAAC;;AAEF,kCAAsB,CAAC,uBAAuB,CAAC,uBAAuB,CAAC,CAClE,IAAI,CAAC,UAAC,QAAQ,EAAK;AAChB,kBAAE,CAAC,iBAAiB,GAAG,QAAQ,CAAC;AAChC,kBAAE,CAAC,aAAa,GAAG,EAAE,CAAC;aACzB,CAAC,CAAC;AACP,cAAE,CAAC,SAAS,GAAG,KAAK,CAAC;SACxB;;AAED,iBAAS,UAAU,GAAG;AAClB,cAAE,CAAC,eAAe,GAAG,KAAK,CAAC;AAC3B,cAAE,CAAC,kBAAkB,GAAG,MAAM,CAAC;AAC/B,cAAE,CAAC,cAAc,GAAG,CAAC,CAAC;AACtB,cAAE,CAAC,iBAAiB,GAAG,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;SACpD;;AAED,iBAAS,qBAAqB,GAAG;AAC7B,gBAAM,cAAc,GAAG,iBAAiB,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;AACpE,cAAE,CAAC,SAAS,GAAG,cAAc,KAAK,iCAAiC,CAAC;SACvE;;AAED,iBAAS,YAAY,GAAG;AACpB,cAAE,CAAC,SAAS,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC;SAChC;KACJ","file":"components/profile-shipment-defaults/insurance/shipment-insurance-controller.js","sourcesContent":["import './shipment-insurance-directive';\r\nimport './../services/profile-shipment-service';\r\nimport './../../../services/navigation-service';\r\nimport angular from 'angular';\r\n\r\nShipmentInsuranceController.$inject = ['$scope', '$q', 'profileShipmentService', 'logService', 'navigationService'];\r\n\r\nexport default function ShipmentInsuranceController($scope, $q, profileShipmentService, logService, navigationService) {\r\n    const vm = this;\r\n    const SHIPMENT_PROTECTION_URL_PARAMETER = 'shipmentProtection';\r\n\r\n    angular.extend(vm, {\r\n        isEditing: false,\r\n        insuranceCurrencies: ['USD', 'EUR'],\r\n\r\n        initFields,\r\n        updateShipmentInsurance,\r\n        preloadSectionFromUrl,\r\n        toggleLayout\r\n    });\r\n\r\n    vm.initFields();\r\n\r\n    profileShipmentService.getShipmentInsurance()\r\n        .then((response) => {\r\n            vm.insureShipments = response.insureShipments;\r\n            vm.insureShipmentType = response.insureShipmentType;\r\n            vm.insuranceValue = response.insuranceValue;\r\n            vm.insuranceCurrency = !response.insuranceCurrency\r\n                ? vm.insuranceCurrencies[0]\r\n                : response.insuranceCurrency;\r\n        });\r\n\r\n    function updateShipmentInsurance() {\r\n        const shipmentInsuranceObject = {\r\n            insureShipments: vm.insureShipments,\r\n            insureShipmentType: vm.insureShipmentType,\r\n            insuranceValue: vm.insuranceValue,\r\n            insuranceCurrency: vm.insuranceCurrency\r\n        };\r\n\r\n        profileShipmentService.updateShipmentInsurance(shipmentInsuranceObject)\r\n            .then((response) => {\r\n                vm.insuranceResponse = response;\r\n                vm.errorMessages = [];\r\n            });\r\n        vm.isEditing = false;\r\n    }\r\n\r\n    function initFields() {\r\n        vm.insureShipments = false;\r\n        vm.insureShipmentType = 'NONE';\r\n        vm.insuranceValue = 0;\r\n        vm.insuranceCurrency = vm.insuranceCurrencies[0];\r\n    }\r\n\r\n    function preloadSectionFromUrl() {\r\n        const currentSection = navigationService.getParamFromUrl('section');\r\n        vm.isEditing = currentSection === SHIPMENT_PROTECTION_URL_PARAMETER;\r\n    }\r\n\r\n    function toggleLayout() {\r\n        vm.isEditing = !vm.isEditing;\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}