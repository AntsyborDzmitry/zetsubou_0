{"version":3,"sources":["components/shipment/shipment-print/shipment-print-service.js"],"names":[],"mappings":";;;qBAMwB,oBAAoB;;;;;;AAJ5C,qBAAI,OAAO,CAAC,sBAAsB,EAAE,oBAAoB,CAAC,CAAC;;AAE1D,wBAAoB,CAAC,OAAO,GAAG,CAAC,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,YAAY,CAAC,CAAC;;AAEzD,aAAS,oBAAoB,CAAC,KAAK,EAAE,EAAE,EAAE,OAAO,EAAE,UAAU,EAAE;AACzE,YAAI,CAAC,uBAAuB,GAAG,uBAAuB,CAAC;;AAEvD,YAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;AAC7C,YAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;AAC7C,YAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;;AAE7C,YAAI,CAAC,cAAc,GAAG,cAAc,CAAC;AACrC,YAAI,CAAC,aAAa,GAAG,aAAa,CAAC;AACnC,YAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;;AAE3C,iBAAS,uBAAuB,CAAC,UAAU,EAAE;AACzC,mBAAO,KAAK,CAAC,GAAG,oBAAkB,UAAU,sBAAmB,CAC1D,IAAI,CAAC,UAAC,QAAQ;uBAAK,QAAQ;aAAA,CAAC,SACvB,CAAC,UAAC,QAAQ,EAAK;AACjB,0BAAU,CAAC,KAAK,CAAC,wCAAwC,CAAC,CAAC;AAC3D,uBAAO,EAAE,CAAC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,CAAC;aAChD,CAAC,CAAC;SACV;;AAED,iBAAS,aAAa,iBAAiB;;AAEnC,gBAAM,UAAU,GAAG;AACd,0BAAU,EAAE,qBAAqB;AACjC,kCAAkB,EAAE,WAAW;aACnC,CAAC;;AAEF,mBAAO,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;;;;;;;;;;SAU9B;;AAED,iBAAS,kBAAkB,CAAC,UAAU,EAAE;AACpC,mBAAO,CAAC,IAAI,oBAAkB,UAAU,gBAAa,CAAC;SACzD;AACD,iBAAS,kBAAkB,CAAC,UAAU,EAAE;AACpC,mBAAO,CAAC,IAAI,oBAAkB,UAAU,kBAAe,CAAC;SAC3D;AACD,iBAAS,kBAAkB,CAAC,UAAU,EAAE;AACpC,mBAAO,CAAC,IAAI,oBAAkB,UAAU,kBAAe,CAAC;SAC3D;;AAED,iBAAS,cAAc,CAAC,UAAU,EAAE;AAChC,gBAAM,QAAQ,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC;AAC5B,oBAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;AAC7B,mBAAO,QAAQ,CAAC,OAAO,CAAC;;;;;;;;;;SAU3B;;AAED,iBAAS,iBAAiB,CAAC,UAAU,EAAE;AACnC,mBAAO,KAAK,CAAC,GAAG,oBAAkB,UAAU,mBAAgB,CACvD,IAAI,CAAC,UAAC,QAAQ;uBAAK,QAAQ,CAAC,IAAI;aAAA,CAAC,SAC5B,CAAC,UAAC,QAAQ,EAAK;AACjB,0BAAU,CAAC,KAAK,CAAC,iCAAiC,CAAC,CAAC;AACpD,uBAAO,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;aAC9B,CAAC,CAAC;SACV;;AAED,YAAM,gBAAgB,GAAG,2BAA2B;YAC9C,eAAe,GAAG,uCAAuC;YACzD,iBAAiB,GAAG,4BAA4B,CAAC;;AAEvD,iBAAS,gBAAgB,CAAC,QAAQ,EAAE;AAChC,oBAAQ,QAAQ,CAAC,MAAM;AACnB,qBAAK,GAAG;AACJ,2BAAO,gBAAgB,CAAC;AAAA,AAC5B,qBAAK,GAAG;AACJ,2BAAO,eAAe,CAAC;AAAA,AAC3B;AACI,2BAAO,iBAAiB,CAAC;AAAA,aAChC;SACJ;KAEJ","file":"components/shipment/shipment-print/shipment-print-service.js","sourcesContent":["import ewf from 'ewf';\r\n\r\newf.service('shipmentPrintService', ShipmentPrintService);\r\n\r\nShipmentPrintService.$inject = ['$http', '$q', '$window', 'logService'];\r\n\r\nexport default function ShipmentPrintService($http, $q, $window, logService) {\r\n    this.getDocumentsForPrinting = getDocumentsForPrinting;\r\n\r\n    this.downloadWaybillPdf = downloadWaybillPdf;\r\n    this.downloadReceiptPdf = downloadReceiptPdf;\r\n    this.downloadInvoicePdf = downloadInvoicePdf;\r\n\r\n    this.saveAsFavorite = saveAsFavorite;\r\n    this.getPickUpInfo = getPickUpInfo;\r\n    this.getTrackingNumber = getTrackingNumber;\r\n\r\n    function getDocumentsForPrinting(shipmentId) {\r\n        return $http.get(`/api/shipment/${shipmentId}/print/documents`)\r\n            .then((response) => response)\r\n            .catch((response) => {\r\n                logService.error('can not receive PDF files for printing');\r\n                return $q.reject(customParseError(response));\r\n            });\r\n    }\r\n\r\n    function getPickUpInfo(/*shipmentId*/) {\r\n        //TODO: replace when the end-point will be available\r\n        const pickUpInfo = {\r\n             pickupDate: 'Today, 28 July 2022',\r\n             confirmationNumber: '777777777'\r\n        };\r\n\r\n        return $q.when(pickUpInfo);\r\n\r\n        /*return $http.get(`/api/shipment/${shipmentId}/pickup`)\r\n             .then(function (response) {\r\n                return response;\r\n             })\r\n             .catch(function (response) {\r\n                logService.error('can not save shipment as favorite');\r\n                return $q.reject(response);\r\n            });*/\r\n    }\r\n\r\n    function downloadWaybillPdf(shipmentId) {\r\n        $window.open(`/api/shipment/${shipmentId}/label/pdf`);\r\n    }\r\n    function downloadReceiptPdf(shipmentId) {\r\n        $window.open(`/api/shipment/${shipmentId}/receipt/pdf`);\r\n    }\r\n    function downloadInvoicePdf(shipmentId) {\r\n        $window.open(`/api/shipment/${shipmentId}/invoice/pdf`);\r\n    }\r\n\r\n    function saveAsFavorite(shipmentId) {\r\n        const deferred = $q.defer();\r\n        deferred.resolve(shipmentId);\r\n        return deferred.promise;\r\n\r\n        /*return $http.get(`/api/shipment/favorite/${shipmentId}`)\r\n            .then(function (response) {\r\n                return response;\r\n            })\r\n            .catch(function (response) {\r\n                logService.error('can not save shipment as favorite');\r\n                return $q.reject(response);\r\n            });*/\r\n    }\r\n\r\n    function getTrackingNumber(shipmentId) {\r\n        return $http.get(`/api/shipment/${shipmentId}/trackingInfo`)\r\n            .then((response) => response.data)\r\n            .catch((response) => {\r\n                logService.error('can not receive tracking number');\r\n                return $q.reject(response);\r\n            });\r\n    }\r\n\r\n    const shipmentNotFound = 'errors.shipment_not_found',\r\n          printLabelError = 'errors.print_label_cannot_be_rendered',\r\n          printServiceError = 'errors.print_service_error';\r\n\r\n    function customParseError(response) {\r\n        switch (response.status) {\r\n            case 404:\r\n                return shipmentNotFound;\r\n            case 422:\r\n                return printLabelError;\r\n            default:\r\n                return printServiceError;\r\n        }\r\n    }\r\n\r\n}\r\n"],"sourceRoot":"/source/"}