{"version":3,"sources":["components/profile-shipment-defaults/pickups/pickups-controller.js"],"names":[],"mappings":"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","file":"components/profile-shipment-defaults/pickups/pickups-controller.js","sourcesContent":["import './../services/profile-shipment-service';\r\nimport './../services/profile-shipment-service';\r\nimport './../../../services/navigation-service';\r\nimport angular from 'angular';\r\n\r\nPickupsController.$inject = ['logService', '$q', 'profileShipmentService', '$filter', 'navigationService'];\r\n\r\nexport default function PickupsController(logService, $q, profileShipmentService, $filter, navigationService) {\r\n    const vm = this;\r\n    const PICKUPS_URL_PARAMETER = 'pickups';\r\n\r\n    angular.extend(vm, {\r\n        isEditing: false,\r\n        tabIsEditing: false,\r\n        rangeSliderOptions: {},\r\n        pickupSettings: {\r\n            pickupDefaultType: 'NONE',\r\n            pickupDetails: {\r\n                pickupLocation: null,\r\n                pickupLocationType: 'NONE',\r\n                instructions: '',\r\n                pickupWindow: {\r\n                    earliestTime: 0,\r\n                    latestTime: 0\r\n                }\r\n            }\r\n        },\r\n\r\n        init,\r\n        objMerge,\r\n        savePickupsSettings,\r\n        preloadSectionFromUrl,\r\n        toggleLayout,\r\n        toggleTabIsEditing\r\n    });\r\n\r\n    function objMerge(obj, src) {\r\n        logService.log(obj, src);\r\n        for (const key in src) {\r\n            if (src[key] !== obj[key] && src[key]) {\r\n                obj[key] = src[key];\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n\r\n    function init() {\r\n        return profileShipmentService.getPickupsData()\r\n            .then((response) => {\r\n                vm.pickupSettings = objMerge(vm.pickupSettings, response);\r\n                const pickupLocations = vm.pickupSettings.pickupDetails.pickupLocation;\r\n\r\n                const pickupAddress = [\r\n                    pickupLocations.addressLine,\r\n                    pickupLocations.city,\r\n                    pickupLocations.zipOrPostCode\r\n                ].filter((item) => !!item)\r\n                .join(', ');\r\n\r\n                vm.pickupSettings.pickupAddress = pickupAddress;\r\n\r\n                vm.rangeSliderOptions = {\r\n                    min: 720,\r\n                    max: 1200,\r\n                    from: vm.pickupSettings.pickupDetails.pickupWindow.earliestTime,\r\n                    to: vm.pickupSettings.pickupDetails.pickupWindow.latestTime,\r\n                    type: 'double',\r\n                    step: 15,\r\n                    grid: true,\r\n                    //We need this params with underscore, because there is a vendor range slider library\r\n                    /*eslint-disable quote-props*/\r\n                    'drag_interval': true,\r\n                    'min_interval': 90,\r\n                    'hide_min_max': true,\r\n                    'grid_num': 4\r\n\r\n                    /*eslint-enable quote-props*/\r\n                };\r\n\r\n                vm.rangeSliderOptions.onChange = (val) => {\r\n                    vm.pickupSettings.pickupDetails.pickupWindow.earliestTime = val.from;\r\n                    vm.pickupSettings.pickupDetails.pickupWindow.latestTime = val.to;\r\n                };\r\n\r\n                vm.rangeSliderOptions.prettify = (value) => {\r\n                    let dateInstance = new Date(0);\r\n\r\n                    dateInstance.setHours(Math.floor(value / 60));\r\n                    dateInstance.setMinutes(value % 60);\r\n\r\n                    return $filter('date')(dateInstance, 'shortTime').toLowerCase();\r\n                };\r\n            });\r\n    }\r\n\r\n    function savePickupsSettings(pickupsData) {\r\n        return profileShipmentService.savePickupsData(pickupsData)\r\n            .then(() => {\r\n            });\r\n    }\r\n\r\n    function preloadSectionFromUrl() {\r\n        const currentSection = navigationService.getParamFromUrl('section');\r\n        vm.isEditing = currentSection === PICKUPS_URL_PARAMETER;\r\n    }\r\n\r\n    function toggleLayout() {\r\n        vm.isEditing = !vm.isEditing;\r\n    }\r\n\r\n    function toggleTabIsEditing() {\r\n        vm.tabIsEditing = !vm.tabIsEditing;\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}