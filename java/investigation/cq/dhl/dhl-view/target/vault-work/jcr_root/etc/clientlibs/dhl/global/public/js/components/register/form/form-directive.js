define(['exports', 'ewf', './../../../directives/ewf-form/ewf-form-directive', './../../../directives/ewf-input/ewf-input-directive', './../../../directives/ewf-validate/ewf-validate-required-directive', './../../../directives/ewf-validate/ewf-validate-pattern-directive', './form-controller', './directives/ewf-check-account-directive', './directives/ewf-email-existance-directive', './directives/ewf-type-ahead-directive', './../../../directives/validation/validated-email/validated-email-directive', './../../../directives/validation/validated-password/validated-password-directive', './../../../directives/ewf-modal/ewf-modal-directive'], function (exports, _ewf, _directivesEwfFormEwfFormDirective, _directivesEwfInputEwfInputDirective, _directivesEwfValidateEwfValidateRequiredDirective, _directivesEwfValidateEwfValidatePatternDirective, _formController, _directivesEwfCheckAccountDirective, _directivesEwfEmailExistanceDirective, _directivesEwfTypeAheadDirective, _directivesValidationValidatedEmailValidatedEmailDirective, _directivesValidationValidatedPasswordValidatedPasswordDirective, _directivesEwfModalEwfModalDirective) {
    'use strict';

    var _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();

    function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

    var _ewf2 = _interopRequireDefault(_ewf);

    var _RegistrationFormController = _interopRequireDefault(_formController);

    _ewf2['default'].directive('registrationForm', registrationForm);

    function registrationForm() {
        return {
            priority: -110,
            restrict: 'E',
            controller: _RegistrationFormController['default'],
            controllerAs: 'regCtrl',
            require: ['^ewfRegistration', 'registrationForm', 'ewfForm'],
            template: '<h1 ng-if=!ewfFormCtrl.rulesObtained nls=registration.rendering_in_progress></h1><div class=main><div class=container ng-if=ewfFormCtrl.rulesObtained><h1 class=\"page-title h1\" nls=registration.head></h1><section class=registration__form><form id=registration class=section__content name=regForm novalidate autocomplete=off ng-submit=\"regForm.$valid && regCtrl.registerNewUser()\" ng-class=\"{submitted: regCtrl.submitted}\" save-to-local-storage><div class=area><h3 class=section__title nls=registration.first_section_title></h3><div ng-if=\"regCtrl.isAccountButtonsDisplayed(!ewfFormCtrl.hideRules.accountHolder, !ewfFormCtrl.hideRules.nonAccountHolder)\"><p nls=registration.account_tips_1></p><h2 class=\"section__title h3\"><span nls=registration.question_is_user_has_dhl_account></span> <a href=account-benefits.html class=dhlicon-account__link target=_blank nls=registration.request_account_link_to_details></a></h2><div class=\"row form-row\"><div class=col-4><label class=\"switcher switcher_width_full\"><input id=dhlAccountExists type=radio class=switcher__input name=isThereDhlAccount value=exists ng-click=regCtrl.hasDhlAccount() ng-model=regCtrl.dhlAccountExists ng-class=\"{checked : regCtrl.dhlAccountExists === \'exists\'}\" exclude-from-local-storage> <span class=switcher__label nls=registration.has_dhl_account_yes_answer></span><div class=switcher__details nls=registration.has_account_button_description></div></label></div><div ewf-field class=col-4><label class=\"switcher switcher_width_full\"><input id=dhlAccountMissing class=switcher__input type=radio name=isThereDhlAccount value=missing ng-click=regCtrl.noDhlAccount() ng-model=regCtrl.dhlAccountExists ng-class=\"{checked : regCtrl.dhlAccountExists === \'missing\'}\" exclude-from-local-storage> <span class=switcher__label nls=registration.has_dhl_account_no_answer></span><div class=switcher__details nls=registration.no_account_button_description></div></label></div></div></div><div class=form-inline><div class=row ng-if=regCtrl.form.hasDHLAccount ng-form=registrationAccountForm ewf-form=registration ewf-field=accountNumbers ewf-account-field=registration.accountNumbers exclude-from-local-storage><div class=\"col-8 overlay-grey registration-account-number\"><div class=account-number-list><div class=\"section-title h4\" nls=registration.account_add_one_or_more_accounts></div><div class=form-row ng-if=!ewfFormCtrl.hideRules.accountNumbers ng-repeat=\"item in accountFieldController.user.accountNumbers\"><div class=\"form-line field\" ewf-field=accountNumbers_{{item.id}}><input type=text class=\"input input_width_base\" ng-model=item.account ewf-input=registration.accountNumbers_{{item.id}} ewf-validate-required ewf-check-account> <span class=validation-mark></span><div ewf-field-errors></div></div><div class=\"form-line field\" ng-if=accountFieldController.isUserHasMultiplyAccounts()><label class=radio><input id=account_number_primary_{{item.id}} type=radio class=radio__input name=accountNumberPrimary ng-model=regCtrl.user.primaryAccountId ng-value=item.id> <span class=label nls=registration.make_account_primary_checkbox_title></span></label></div><div class=\"form-line field\" ng-if=\"!accountFieldController.isItemFirstInArray(item) && accountFieldController.isUserHasMultiplyAccounts()\"><button type=button class=\"btn btn_action\" ng-click=accountFieldController.remove(item)><i class=dhlicon-remove></i> <span nls=registration.remove_account_field_button></span></button></div></div><button type=button class=\"btn btn_small btn_animate\" ng-class=\"{disabled: !accountFieldController.maxArrayLengthValid || !registrationAccountForm.$valid }\" ng-disabled=\"!accountFieldController.maxArrayLengthValid || !registrationAccountForm.$valid\" ng-click=\"accountFieldController.maxArrayLengthValid && accountFieldController.add()\"><i class=dhlicon-add></i> <span class=btn__text nls=registration.add_account_field_button></span></button></div><footer class=\"section__footer a-right\"><button type=button class=\"btn btn_success\" ng-value=nls.continue ng-disabled=\"!accountFieldController.maxArrayLengthValid || !registrationAccountForm.$valid\" ng-click=\"ewfFormCtrl.ewfValidation() && regCtrl.showRegistrationForm(registrationAccountForm)\"><span nls=registration.account_part_continue_button></span> <i class=\"dhlicon-carat-right righ\"></i></button></footer></div><div class=\"col-3 offset-1 registration__note\"><div class=\"callout callout_carat_left\"><div class=callout__content nls=registration.account_tips_2></div></div></div></div></div></div><div class=area ng-if=regCtrl.form.showRegistrationDetails><div class=row><div class=col-md-4><div class=overlay-grey><div class=col-5><h2 class=\"h4 section-title\" nls=registration.your_info_section_title></h2><div class=field-wrapper><span class=user-country><i class=\"user-country__flag flag flag_{{regCtrl.userCountryCode}}\"></i> <span ng-bind=regCtrl.currentCountry.name></span></span> <span class=\"hover-globe btn btn_action dhlicon-globe\" ng-click=regCtrl.selectCountryPopUp()><span nls=registration.change_country_modal_label></span></span></div><div class=row><div class=col-3><label class=field-wrapper ng-if=!ewfFormCtrl.hideRules.title ewf-field=nameTitle><span class=label nls=registration.title_input_label></span> <span class=\"select select_width_full\"><select name=nameTitle class=\"select select_width_full\" ng-options=\"title.name for title in regCtrl.titleOptions\" ng-model=regCtrl.user.nameTitle ewf-input=registration.nameTitle></select></span></label></div><div class=col-9><label class=\"col-6 field field_with-mark\" ng-if=!ewfFormCtrl.hideRules.firstName ewf-field=firstName><span class=label nls=registration.first_name_input_label></span> <input name=firstName class=\"input input_width_full\" type=text maxlength=35 ng-model=regCtrl.user.firstName ewf-input=registration.firstName ewf-validate-required> <span class=validation-mark></span><div ewf-field-errors></div></label> <label class=\"col-6 field field_with-mark\" ng-if=!ewfFormCtrl.hideRules.lastName ewf-field=lastName><span class=label nls=registration.last_name_input_label></span> <input name=lastName class=\"input input_width_full\" type=text maxlength=35 ng-model=regCtrl.user.lastName ewf-input=registration.lastName ewf-validate-required> <span class=validation-mark></span><div ewf-field-errors></div></label></div></div><div class=row><label class=field-wrapper ng-if=!ewfFormCtrl.hideRules.company ewf-field=company><span class=label nls=registration.company_input_label></span> <input id=company class=\"input input_width_full\" name=company type=text maxlength=35 ng-model=regCtrl.user.companyName ewf-input=registration.company> <span class=validation-mark></span><div ewf-field-errors></div></label></div><div class=row><label class=\"col-3 field-wrapper\" ng-if=!ewfFormCtrl.hideRules.phoneCode ewf-field=phoneCode><span class=label nls=registration.country_code_input_label></span><div class=\"field phone-autocomplete\"><i class=\"phone-autocomplete__flag flag flag_small flag_{{ regCtrl.userCountryCode }}\"></i> <input name=phoneCode class=\"input input_width_full ui-autocomplete-input\" ng-model=regCtrl.user.phoneCode ewf-input=registration.phoneCode ewf-validate-pattern=^\\+?\\d{1,3}$ ewf-validate-pattern-message=registration.country_code_format_error> <span class=validation-mark></span><div ewf-field-errors></div></div></label> <label class=\"col-7 field-wrapper\" ng-if=!ewfFormCtrl.hideRules.primaryPhone ewf-field=primaryPhone><span class=label nls=registration.phone_input_label></span> <input id=phone name=phone type=text class=\"input input_width_full\" placeholder=\"(___) ___-____\" maxlength=35 ng-model=regCtrl.user.primaryPhone ui-mask=\"(999) 999-9999\" ui-options=\"{clearOnBlur : false}\" ewf-input=registration.primaryPhone ewf-validate-required> <span class=validation-mark></span><div ewf-field-errors></div></label> <label class=\"field-wrapper col-2\" ng-if=!ewfFormCtrl.hideRules.primaryPhoneExt ewf-field=primaryPhoneExt><span class=label nls=registration.ext_input_label></span> <input id=ext name=ext type=text class=\"input input_width_full\" ng-model=regCtrl.user.primaryPhoneExt ng-model-options=\"{ updateOn: \'blur\'}\" ewf-input=registration.primaryPhoneExt> <span class=validation-mark></span><div ewf-field-errors></div></label></div><div class=row><label class=checkbox ewf-field=smsEnabledPhone><input id=is_sms_enabled class=checkbox__input type=checkbox value=checkbox data-aqa-id=is_sms_enabled ng-model=regCtrl.user.smsEnabledPhone ewf-input=registration.smsEnabledPhone> <span class=label nls=registration.sms_enabled_checkbox_label></span><div ewf-field-errors></div><span class=\"label-error msg-error\" ng-bind=errorMessage></span></label></div></div><div class=\"col-5 offset-1\"><h2 class=\"h4 section-title\"><span nls=registration.create_password_block_title></span> <i class=dhlicon-lock></i></h2><label class=field-wrapper ewf-field=email><span class=label nls=registration.email_input_label></span> <input id=ewf_email name=ewf_email class=\"input input_width_full\" type=email maxlength=100 autocomplete=off ng-model=regCtrl.user.email ng-model-options=\"{ updateOn: \'blur\'}\" validated-email=exist ewf-input=registration.ewfemail ewf-validate-required> <span class=validation-mark></span><div ewf-field-errors></div><div class=msg-error ng-if=regForm.ewf_email.$invalid><div ng-repeat=\"(key, value) in regForm.ewf_email.errorsMessages\"><span ng-if=regForm.ewf_email.$error[key] nls={{value}}></span></div></div></label><div ewf-password ewf-form-name=registration ng-model=regCtrl.user.password></div></div></div><div class=registration__extra-info><label class=checkbox ewf-field=promoViaEmail><input id=promoViaEmail class=checkbox__input type=checkbox value=checkbox ng-model=regCtrl.user.promoViaEmail data-aqa-id=promoViaEmail ewf-input=registration.promoViaEmail> <span class=label nls=registration.marketing_acceptance_checkbox_label></span><div ewf-field-errors></div><span class=msg-error ng-bind=regCtrl.validationErrorMessage.promoViaEmail></span></label></div><div class=registration__extra-info ng-if=!regCtrl.form.hasDHLAccount><div ng-if=!ewfFormCtrl.hideRules.request_account_block><h3 class=\"section-title h4\" nls=registration.register_dhl_account_block_title></h3><p nls=registration.dhl_account_block_description></p><div class=field-wrapper><label class=checkbox><input id=request_account name=request_account class=checkbox__input type=checkbox value=checkbox ng-model=regCtrl.user.requestNewAccount ng-value=true data-aqa-id=request_account exclude-from-local-storage> <span class=label nls=registration.dhl_account_request_checkbox_label></span></label></div><div class=row ng-if=regCtrl.user.requestNewAccount ng-form=requestAccountForm ewf-form=registration><div class=col-6><label class=field-wrapper ewf-field=ship_frequency><span class=label nls=registration.dhl_account_shipment_frequency_select_label></span> <span class=select><select id=shipmentFrequency name=shipmentFrequency ng-model=regCtrl.user.shipmentFrequency ng-options=\"frequency.name for frequency in regCtrl.shipmentFrequencyOptions\" ewf-input=registration.ship_frequency></select></span> <span class=\"label-error msg-error\" ng-if=\"regForm.shipmentFrequency.$error.required && (regForm.shipmentFrequency.$dirty || regCtrl.submitted)\" nls=registration.reguired_message></span></label> <label class=field-wrapper ng-if=!ewfFormCtrl.hideRules.addrLine1 ewf-field=addrLine1><span class=label nls=registration.dhl_account_shipment_address_1_input_label></span> <input id=addrLine1 name=addrLine1 class=\"input input_width_full\" type=text autocomplete=off required ng-model=regCtrl.user.addrLine1 ewf-input=registration.addrLine1 ewf-autocomplete> <span class=validation-mark></span><div ewf-field-errors></div><span class=\"msg-error label-required\" ng-if=requestAccountForm.addrLine1.$error.required nls=registration.reguired_message></span></label> <label class=field-wrapper ng-if=!ewfFormCtrl.hideRules.addrLine2 ewf-field=addrLine2><span class=label nls=registration.dhl_account_shipment_address_2_input_label></span> <input id=addrLine2 name=addrLine2 class=\"input input_width_full\" type=text required maxlength=35 ng-model=regCtrl.user.addrLine2 ewf-input=registration.addrLine2> <span class=validation-mark></span><div ewf-field-errors></div><span class=\"msg-error label-required\" ng-if=requestAccountForm.addrLine2.$error.required nls=registration.reguired_message></span></label><div class=row><div class=col-5><label class=field-wrapper ng-if=!ewfFormCtrl.hideRules.city ewf-field=city><span class=label nls=registration.dhl_account_shipment_address_city_input_label></span> <input id=city name=city class=\"input input_width_full\" type=text required ng-model=regCtrl.user.city ewf-input=registration.city> <span class=validation-mark></span><div ewf-field-errors></div><span class=\"msg-error label-required\" ng-if=requestAccountForm.city.$error.required nls=registration.reguired_message></span></label></div><div class=col-4><label class=field-wrapper ng-if=!ewfFormCtrl.hideRules.province ewf-field=province><span class=label nls=registration.dhl_account_shipment_address_state_input_label></span> <input id=province name=province class=\"input input_width_full\" type=text required ng-model=regCtrl.user.province ewf-input=registration.province> <span class=validation-mark></span><div ewf-field-errors></div><span class=\"msg-error label-required\" ng-if=requestAccountForm.province.$error.required nls=registration.reguired_message></span></label></div><div class=col-3><label class=field-wrapper ng-if=!ewfFormCtrl.hideRules.postCode ewf-field=postCode><span class=label nls=registration.dhl_account_shipment_address_zip_input_label></span> <input id=postCode name=postCode class=\"input input_width_full\" type=text required ng-model=regCtrl.user.postCode ewf-input=registration.postCode> <span class=validation-mark></span><div ewf-field-errors></div><span class=\"msg-error label-required\" ng-if=requestAccountForm.postCode.$error.required nls=registration.reguired_message></span></label></div></div></div></div></div></div></div></div><div class=registration__extra-info ng-if=regCtrl.form.showRegistrationDetails><h3 class=\"section-title h4\" nls=registration.term_conditions_section_title></h3><label class=\"checkbox block\" ewf-field=termsAgreement><input id=terms name=terms type=checkbox class=checkbox__input value=checkbox ng-model=regCtrl.form.termsAgreement ng-required=\"regCtrl.submitted || regForm.terms.$dirty\"> <span class=label><span nls=registration.terms_and_conditions_checkbox_label></span> <a class=registration__extra-info-link ng-click=regCtrl.termsAgreementPopUp() nls=registration.terms_and_conditions></a></span> <span class=\"label-error msg-error\" ng-bind=regCtrl.validationErrorMessage.terms></span> <span class=label-error ng-if=regForm.terms.$error.required nls=registration.terms_and_conditions_checkbox_label_err_msg></span></label> <label class=\"checkbox block\" ng-if=!ewfFormCtrl.hideRules.privacyCookiePolicy ewf-field=privacyCookiePolicy><input id=privacy name=privacy type=checkbox value=checkbox class=checkbox__input ng-model=regCtrl.form.privacyAgreement ng-required=\"regCtrl.submitted || regForm.privacy.$dirty\" ewf-input=registration.privacyCookiePolicy> <span class=label><span nls=registration.privacy_cookie_policy_checkbox_label></span> <a class=registration__extra-info-link ng-click=regCtrl.policyPopUp() nls=registration.privacy_and_cookies_policy></a></span> <span class=msg-error ng-bind=regCtrl.validationErrorMessage.privacyCookiePolicy></span> <span class=label-error ng-if=regForm.privacy.$error.required nls=registration.privacy_cookie_policy_checkbox_label_err_msg></span></label><div class=captcha-wrapper ng-if=!ewfFormCtrl.hideRules.captcha ewf-field=captcha><div id=registration-captcha captcha options=regCtrl.captchaOptions></div><span class=validation-mark></span><div ewf-field-errors></div></div><div ewf-form-errors></div><footer class=\"section__footer a-right\"><button type=submit class=\"btn btn_success\" ng-click=\"regCtrl.submitted=true && ewfFormCtrl.ewfValidation()\" nls=registration.submit_button></button></footer></div></div></form></section></div></div>',
            link: {
                pre: preLink
            }
        };
    }

    function preLink(scope, element, attrs, controllers) {
        var _controllers = _slicedToArray(controllers, 3);

        var regCtrl = _controllers[0];
        var regFormCtrl = _controllers[1];
        var ewfFormCtrl = _controllers[2];

        regFormCtrl.setRegistrationController(regCtrl);
        regFormCtrl.ewfFormCtrl = ewfFormCtrl;
    }
});
//# sourceMappingURL=form-directive.js.map
