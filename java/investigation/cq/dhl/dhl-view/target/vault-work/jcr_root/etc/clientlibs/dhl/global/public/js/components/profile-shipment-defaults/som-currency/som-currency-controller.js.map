{"version":3,"sources":["components/profile-shipment-defaults/som-currency/som-currency-controller.js"],"names":[],"mappings":";;;qBAKwB,qBAAqB;;;;;;AAF7C,yBAAqB,CAAC,OAAO,GAAG,CAAC,wBAAwB,EAAE,mBAAmB,CAAC,CAAC;;AAEjE,aAAS,qBAAqB,CAAC,sBAAsB,EAAE,iBAAiB,EAAE;AACrF,YAAM,EAAE,GAAG,IAAI,CAAC;AAChB,YAAI,qBAAqB,GAAG,EAAE,CAAC;AAC/B,YAAM,0BAA0B,GAAG,aAAa,CAAC;;AAEjD,cAAM,CAAC,MAAM,CAAC,EAAE,EAAE;AACd,iCAAqB,EAAE,EAAE;AACzB,qBAAS,EAAE,KAAK;AAChB,8BAAkB,EAAE,EAAE;;AAEtB,wCAA4B,EAA5B,4BAA4B;AAC5B,uCAA2B,EAA3B,2BAA2B;;AAE3B,iCAAqB,EAArB,qBAAqB;AACrB,wBAAY,EAAZ,YAAY;AACZ,qBAAS,EAAT,SAAS;SACZ,CAAC,CAAC;;AAEH,iBAAS,4BAA4B,GAAG;AACpC,kCAAsB,CAAC,wBAAwB,EAAE,CAC5C,IAAI,CAAC,UAAC,QAAQ,EAAK;AAChB,kBAAE,CAAC,qBAAqB,GAAG,QAAQ,CAAC;AACpC,qCAAqB,GAAG,qBAAQ,IAAI,CAAC,QAAQ,CAAC,CAAC;aAClD,CAAC,CAAC;SACV;;AAED,iBAAS,2BAA2B,GAAG;AACnC,kCAAsB,CAAC,2BAA2B,CAAC;AAC/C,mBAAG,EAAE,EAAE,CAAC,qBAAqB,CAAC,GAAG;AACjC,+BAAe,EAAE,EAAE,CAAC,qBAAqB,CAAC,eAAe;AACzD,wCAAwB,EAAE,EAAE,CAAC,qBAAqB,CAAC,wBAAwB;aAC9E,CAAC,CACD,IAAI,CAAC,YAAM;AACR,kBAAE,CAAC,kBAAkB,GAAG,EAAE,CAAC;AAC3B,kBAAE,CAAC,SAAS,GAAG,KAAK,CAAC;AACrB,qCAAqB,GAAG,qBAAQ,IAAI,CAAC,EAAE,CAAC,qBAAqB,CAAC,CAAC;aAClE,CAAC,SACI,CAAC,UAAC,KAAK,EAAK;AACd,kBAAE,CAAC,kBAAkB,GAAG,KAAK,CAAC,OAAO,CAAC;aACzC,CAAC,CAAC;SACN;;AAED,iBAAS,YAAY,GAAG;AACpB,gBAAI,EAAE,CAAC,SAAS,EAAE;AACd,0CAA0B,EAAE,CAAC;aAChC;;AAED,cAAE,CAAC,SAAS,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC;AAC7B,cAAE,CAAC,kBAAkB,GAAG,EAAE,CAAC;SAC9B;;AAED,iBAAS,SAAS,GAAG;AACjB,mBAAO,CAAC,EAAE,EAAE,CAAC,qBAAqB,IAAI,EAAE,CAAC,qBAAqB,CAAC,OAAO,CAAA,AAAC,CAAC;SAC3E;;AAED,iBAAS,0BAA0B,GAAG;AAClC,cAAE,CAAC,qBAAqB,GAAG,qBAAQ,IAAI,CAAC,qBAAqB,CAAC,CAAC;SAClE;;AAED,iBAAS,qBAAqB,GAAG;AAC7B,gBAAM,cAAc,GAAG,iBAAiB,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;AACpE,cAAE,CAAC,SAAS,GAAG,cAAc,KAAK,0BAA0B,CAAC;SAChE;KACJ","file":"components/profile-shipment-defaults/som-currency/som-currency-controller.js","sourcesContent":["import angular from 'angular';\r\nimport './../services/profile-shipment-service';\r\n\r\nSomCurrencyController.$inject = ['profileShipmentService', 'navigationService'];\r\n\r\nexport default function SomCurrencyController(profileShipmentService, navigationService) {\r\n    const vm = this;\r\n    let initialSomAndCurrency = {};\r\n    const SOM_CURRENCY_URL_PARAMETER = 'somCurrency';\r\n\r\n    Object.assign(vm, {\r\n        defaultSomAndCurrency: {},\r\n        isEditing: false,\r\n        serverErrorMessage: '',\r\n\r\n        preloadDefaultSomAndCurrency,\r\n        updateDefaultSomAndCurrency,\r\n        //TODO: make single method for all sections\r\n        preloadSectionFromUrl,\r\n        toggleLayout,\r\n        isSomList\r\n    });\r\n\r\n    function preloadDefaultSomAndCurrency() {\r\n        profileShipmentService.getDefaultSomAndCurrency()\r\n            .then((response) => {\r\n                vm.defaultSomAndCurrency = response;\r\n                initialSomAndCurrency = angular.copy(response);\r\n            });\r\n    }\r\n\r\n    function updateDefaultSomAndCurrency() {\r\n        profileShipmentService.updateDefaultSomAndCurrency({\r\n            som: vm.defaultSomAndCurrency.som,\r\n            defaultCurrency: vm.defaultSomAndCurrency.defaultCurrency,\r\n            defaultInsuranceCurrency: vm.defaultSomAndCurrency.defaultInsuranceCurrency\r\n        })\r\n        .then(() => {\r\n            vm.serverErrorMessage = '';\r\n            vm.isEditing = false;\r\n            initialSomAndCurrency = angular.copy(vm.defaultSomAndCurrency);\r\n        })\r\n        .catch((error) => {\r\n            vm.serverErrorMessage = error.message;\r\n        });\r\n    }\r\n\r\n    function toggleLayout() {\r\n        if (vm.isEditing) {\r\n            resetDefaultSomAndCurrency();\r\n        }\r\n\r\n        vm.isEditing = !vm.isEditing;\r\n        vm.serverErrorMessage = '';\r\n    }\r\n\r\n    function isSomList() {\r\n        return !!(vm.defaultSomAndCurrency && vm.defaultSomAndCurrency.somList);\r\n    }\r\n\r\n    function resetDefaultSomAndCurrency() {\r\n        vm.defaultSomAndCurrency = angular.copy(initialSomAndCurrency);\r\n    }\r\n\r\n    function preloadSectionFromUrl() {\r\n        const currentSection = navigationService.getParamFromUrl('section');\r\n        vm.isEditing = currentSection === SOM_CURRENCY_URL_PARAMETER;\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}