{"version":3,"sources":["components/shipment/pickup/pickup-service.js"],"names":[],"mappings":";;;qBAMwB,aAAa;;;;;;AAJrC,qBAAI,OAAO,CAAC,eAAe,EAAE,aAAa,CAAC,CAAC;;AAE5C,iBAAa,CAAC,OAAO,GAAG,CAAC,OAAO,EAAE,IAAI,EAAE,YAAY,CAAC,CAAC;;AAEvC,aAAS,aAAa,CAAC,KAAK,EAAE,EAAE,EAAE,UAAU,EAAE;;AAEzD,YAAM,SAAS,GAAG;AACd,8BAAkB,EAAlB,kBAAkB;AAClB,uCAA2B,EAA3B,2BAA2B;AAC3B,qCAAyB,EAAzB,yBAAyB;AACzB,4BAAgB,EAAhB,gBAAgB;SACnB,CAAC;;;AAGF,iBAAS,kBAAkB,CAAC,eAAe,EAAE;AACzC,mBAAO,KAAK,CAAC,GAAG,0CAAwC,eAAe,CAAG,CACrE,IAAI,CAAC,UAAC,QAAQ;uBAAK,QAAQ,CAAC,IAAI;aAAA,CAAC,SAC5B,CAAC,UAAC,QAAQ,EAAK;AACjB,0BAAU,CAAC,GAAG,mCAAiC,QAAQ,CAAC,IAAI,CAAG,CAAC;;AAEhE,oBAAI,eAAe,KAAK,IAAI,EAAE;AAC1B,2BAAO,CACH,EAAC,IAAI,EAAE,YAAY,EAAC,EACpB,EAAC,IAAI,EAAE,WAAW,EAAC,CACtB,CAAC;iBACL;AACD,uBAAO,CACH,EAAC,IAAI,EAAE,YAAY,EAAC,EACpB,EAAC,IAAI,EAAE,WAAW,EAAC,EACnB,EAAC,IAAI,EAAE,WAAW,EAAC,EACnB,EAAC,IAAI,EAAE,cAAc,EAAC,CACzB,CAAC;aACL,CAAC,CAAC;SACV;;AAED,iBAAS,2BAA2B,GAAG;AACnC,mBAAO,KAAK,CAAC,GAAG,2CAA2C,CACtD,IAAI,CAAC,UAAC,QAAQ;uBAAK,QAAQ,CAAC,IAAI,IAAI,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC;aAAA,CAAC,SACnD,CAAC,UAAC,QAAQ,EAAK;AACjB,0BAAU,CAAC,GAAG,wCAAsC,QAAQ,CAAC,IAAI,CAAG,CAAC;AACrE,uBAAO,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;aACnC,CAAC,CAAC;SACV;;AAED,iBAAS,yBAAyB,CAAC,UAAU,EAAE,aAAa,EAAE;AAC1D,gBAAM,IAAI,GAAG,EAAC,UAAU,EAAV,UAAU,EAAE,aAAa,EAAb,aAAa,EAAC,CAAC;AACzC,mBAAO,KAAK,CAAC,IAAI,gCAAgC,IAAI,CAAC,CACjD,IAAI,CAAC,UAAC,QAAQ;uBAAK,AAAC,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAI,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC;aAAA,CAAC,SAC/F,CAAC,UAAC,QAAQ,EAAK;AACjB,0BAAU,CAAC,GAAG,2CAAyC,QAAQ,CAAC,IAAI,CAAG,CAAC;AACxE,uBAAO,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;aACnC,CAAC,CAAC;SACV;;AAED,iBAAS,gBAAgB,CAAC,OAAO,EAAE;AAC/B,mBAAO,OAAO,CAAC,gBAAgB,GAAG,OAAO,CAAC,mBAAmB,CAAC;SACjE;;AAED,eAAO,SAAS,CAAC;KACpB","file":"components/shipment/pickup/pickup-service.js","sourcesContent":["import ewf from 'ewf';\r\n\r\newf.service('pickupService', pickupService);\r\n\r\npickupService.$inject = ['$http', '$q', 'logService'];\r\n\r\nexport default function pickupService($http, $q, logService) {\r\n\r\n    const publicApi = {\r\n        getPickupLocations,\r\n        getUserProfileDefaultValues,\r\n        getBookingReferenceNumber,\r\n        getLatestBooking\r\n    };\r\n\r\n    // TODO: change endpoint to actual one\r\n    function getPickupLocations(shipmentCountry) {\r\n        return $http.get(`/api/shipment/pickup/locations/list/${shipmentCountry}`)\r\n            .then((response) => response.data)\r\n            .catch((response) => {\r\n                logService.log(`Pickup locations failed with ${response.data}`);\r\n                // TODO: remove mock\r\n                if (shipmentCountry === 'DE') {\r\n                    return [\r\n                        {name: 'FRONT DOOR'},\r\n                        {name: 'RECEPTION'}\r\n                    ];\r\n                }\r\n                return [\r\n                    {name: 'FRONT DOOR'},\r\n                    {name: 'BACK DOOR'},\r\n                    {name: 'RECEPTION'},\r\n                    {name: 'LOADING DOCK'}\r\n                ];\r\n            });\r\n    }\r\n\r\n    function getUserProfileDefaultValues() {\r\n        return $http.get(`/api/myprofile/shipment/defaults/pickup`)\r\n            .then((response) => response.data || $q.reject(response))\r\n            .catch((response) => {\r\n                logService.log(`Pickup default values failed with ${response.data}`);\r\n                return $q.reject(response.data);\r\n            });\r\n    }\r\n\r\n    function getBookingReferenceNumber(pickupDate, pickupAddress) {\r\n        const data = {pickupDate, pickupAddress};\r\n        return $http.post(`/api/shipment/pickup/search`, data)\r\n            .then((response) => (response.data && response.data.length) ? response.data[0] : $q.reject(response))\r\n            .catch((response) => {\r\n                logService.log(`Booking Reference Number failed with ${response.data}`);\r\n                return $q.reject(response.data);\r\n            });\r\n    }\r\n\r\n    function getLatestBooking(product) {\r\n        return product.pickupCutoffTime - product.bookingCutoffOffset;\r\n    }\r\n\r\n    return publicApi;\r\n}\r\n"],"sourceRoot":"/source/"}