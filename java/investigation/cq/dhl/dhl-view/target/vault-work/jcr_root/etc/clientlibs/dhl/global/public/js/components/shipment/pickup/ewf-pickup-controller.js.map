{"version":3,"sources":["components/shipment/pickup/ewf-pickup-controller.js"],"names":[],"mappings":"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","file":"components/shipment/pickup/ewf-pickup-controller.js","sourcesContent":["import ewf from 'ewf';\r\nimport './pickup-service';\r\nimport './../../../services/date-time-service';\r\nimport './../shipment-products/shipment-products-service';\r\nimport './../../../services/modal/modal-service';\r\nimport './../../../services/config-service';\r\nimport EwfShipmentStepBaseController from './../ewf-shipment-step-base-controller';\r\n\r\nEwfPickupController.$inject = [\r\n    '$scope',\r\n    '$timeout',\r\n    '$sce',\r\n    '$location',\r\n    'nlsService',\r\n    'pickupService',\r\n    'shipmentService',\r\n    'shipmentProductsService',\r\n    'dateTimeService',\r\n    'modalService',\r\n    'configService'\r\n];\r\n\r\nEwfPickupController.prototype = new EwfShipmentStepBaseController('schedule-pickup');\r\n\r\newf.controller('EwfPickupController', EwfPickupController);\r\nexport default function EwfPickupController($scope,\r\n                                            $timeout,\r\n                                            $sce,\r\n                                            $location,\r\n                                            nlsService,\r\n                                            pickupService,\r\n                                            shipmentService,\r\n                                            shipmentProductsService,\r\n                                            dateTimeService,\r\n                                            modalService,\r\n                                            configService) {\r\n    const vm = this;\r\n\r\n    const SHIPPING_START_TYPE = {\r\n        PICKUP: 'pickup',\r\n        DROPOFF: 'dropoff'\r\n    };\r\n\r\n    const PICKUP_TYPES = {\r\n        PICKUP: 'YES_COURIER',\r\n        PICKUP_SCHEDULED: 'NO_SCHEDULED',\r\n        DROPOFF: 'NO_DROP_OFF'\r\n    };\r\n\r\n    const UOM_KEYS = [\r\n        {\r\n            nlsKey: 'shipment.package_details_kg',\r\n            value: 'KG'\r\n        },\r\n        {\r\n            nlsKey: 'shipment.package_details_lb',\r\n            value: 'LB'\r\n        }\r\n    ];\r\n\r\n    const PICKUP_LOCATION_OTHER = {name: 'OTHER'};\r\n\r\n    const defaultValues = {\r\n        pickupLocationType: null,\r\n        pickupWindow: {\r\n            earliestTime: null,\r\n            latestTime: null\r\n        }\r\n    };\r\n\r\n    let displayPickupWindowCallback = null;\r\n    let pendingUserProfileDefaults = false;\r\n    let shipperAddress = null;\r\n\r\n    Object.assign(vm, {\r\n        onInit,\r\n        onEdit,\r\n        onNextClick,\r\n        resolvePickupLocationName,\r\n        getCurrentIncompleteData,\r\n        isPickupRequired,\r\n        isDropoffRequred,\r\n        isOtherPickupLocation,\r\n        setPickupWindowDisplayCallback,\r\n        getFormattedTime,\r\n        changePickupDate,\r\n        loadShipmentData,\r\n        onPickupTypeSelection,\r\n        isNextButtonVisible,\r\n        openTSANotification,\r\n        closeScheduledPickupNotification,\r\n        editPickupAddress,\r\n        updatePickupAddress,\r\n\r\n        pickupDate: {\r\n            originalDate: null\r\n        },\r\n        pickupTime: {\r\n            readyByTime: null,\r\n            closeTime: null\r\n        },\r\n        pickupAddress: {\r\n            addressDetails: {\r\n                addrLine1: null,\r\n                city: null,\r\n                countryCode: null,\r\n                countryName: null,\r\n                stateOrProvince: null,\r\n                zipOrPostCode: null\r\n            },\r\n            name: null,\r\n            company: null\r\n        },\r\n        pickupAddressNew: {},\r\n        referenceNumber: null,\r\n        isBookByMessageShown: false,\r\n        bookByMessage: '',\r\n        pickupWindowSettings: {},\r\n        howStartShipping: null,\r\n        pickupLocations: [],\r\n        pickupLocation: null,\r\n        pickupLocationOtherDescription: '',\r\n        pickupSpecialInstructions: null,\r\n        totalPickupWeight: {\r\n            value: null,\r\n            unit: null\r\n        },\r\n        SHIPPING_START_TYPE,\r\n        isPickupScheduled: false,\r\n        pickupAddressEditMode: false,\r\n        packagings: [],\r\n        requirePackagings: false,\r\n        packagingsAvailable: false,\r\n        pickupPackagingsForm: null,\r\n        isPickupSliderShown: false,\r\n        isTSANotificationShown: false\r\n    });\r\n\r\n    function onInit() {\r\n        pendingUserProfileDefaults = true;\r\n        saveShipperAddress();\r\n        initShipperCountry();\r\n        vm.totalPickupWeight = shipmentService.getTotalWeight();\r\n        setDefaultValues();\r\n        setInitialPackagings();\r\n    }\r\n\r\n    function saveShipperAddress() {\r\n        shipperAddress = shipmentService.getShipperAddress();\r\n    }\r\n\r\n    function onEdit() {\r\n        vm.isPickupSliderShown = false;\r\n        initShipperCountry();\r\n        updateTSAAvailability();\r\n        if (!pendingUserProfileDefaults) {\r\n            getBookingReferenceNumber();\r\n            processShipperAddress();\r\n            adjustPickupSection();\r\n        }\r\n        vm.pickupAddressEditMode = false;\r\n        updatePackagingsAvailability();\r\n    }\r\n\r\n    function initShipperCountry() {\r\n        vm.shipmentCountry = shipmentService.getShipmentCountry();\r\n    }\r\n\r\n    function updatePackagingsAvailability() {\r\n        vm.packagingsAvailable = false;\r\n        const packagingCIKey = 'Pickup. .request.dhl.packaging';\r\n\r\n        configService\r\n            .getBoolean(packagingCIKey, shipmentService.getShipmentCountry())\r\n            .then(setPackagingsAvailability);\r\n    }\r\n\r\n    function setPackagingsAvailability(packagingsAvailable) {\r\n        vm.packagingsAvailable = packagingsAvailable;\r\n    }\r\n\r\n    function setDefaultValues() {\r\n        getBookingReferenceNumber().then(getUserProfileDefaultValues);\r\n    }\r\n\r\n    function getBookingReferenceNumber() {\r\n        const pickupDate = shipmentService.getShipmentProduct().pickupDate;\r\n        const pickupAddress = shipmentService.getFormattedShipperAddress();\r\n        return pickupService.getBookingReferenceNumber(pickupDate, pickupAddress)\r\n            .then((number) => {\r\n                vm.referenceNumber = number;\r\n                vm.howStartShipping = SHIPPING_START_TYPE.DROPOFF;\r\n            })\r\n            .catch(() => {\r\n                vm.referenceNumber = null;\r\n            })\r\n            .finally(() => {\r\n                vm.isPickupScheduled = !!vm.referenceNumber;\r\n            });\r\n    }\r\n\r\n    function setInitialPackagings() {\r\n        const packagings = shipmentService.getPickupData().packageList;\r\n        const packagingsExist = packagings && Array.isArray(packagings);\r\n\r\n        vm.requirePackagings = packagingsExist && packagings.length;\r\n        vm.packagings = packagingsExist ? packagings : [];\r\n    }\r\n\r\n    function updateTSAAvailability() {\r\n        const key = 'General Settings. .enable.tsa.privacy.act.notification';\r\n        vm.isTSANotificationShown = false;\r\n        configService.getBoolean(key, vm.shipmentCountry)\r\n            .then((isTSANotificationShown) => {\r\n                vm.isTSANotificationShown = isTSANotificationShown;\r\n            });\r\n    }\r\n\r\n    function processShipperAddress() {\r\n        const newShipperAddress = shipmentService.getShipperAddress();\r\n        if (!angular.equals(shipperAddress, newShipperAddress)) {\r\n            shipperAddress = newShipperAddress;\r\n            setPickupAddress();\r\n        }\r\n    }\r\n\r\n    function adjustPickupSection() {\r\n        vm.pickupAddressNew = angular.copy(vm.pickupAddress);\r\n        vm.pickupLocations = [];\r\n        processPickupLocations();\r\n        updatePickupWindow();\r\n    }\r\n\r\n    function getUserProfileDefaultValues() {\r\n        pickupService.getUserProfileDefaultValues()\r\n            .then((data) => {\r\n                setPickupType(data.pickupDefaultType);\r\n                setPickupLocationDefaultValue(data.pickupDetails);\r\n                setPickupInstructionsDefaultValue(data.pickupDetails);\r\n                setPickupWindowDefaultValues(data.pickupDetails);\r\n            })\r\n            .finally(() => {\r\n                pendingUserProfileDefaults = false;\r\n                setPickupAddress();\r\n                adjustPickupSection();\r\n            });\r\n    }\r\n\r\n    function setPickupType(type) {\r\n        vm.howStartShipping = null;\r\n\r\n        if (isDropoffAvailable(type)) {\r\n            vm.howStartShipping = SHIPPING_START_TYPE.DROPOFF;\r\n        } else if (isPickupAvailable(type)) {\r\n            vm.howStartShipping = SHIPPING_START_TYPE.PICKUP;\r\n        }\r\n    }\r\n\r\n    function isDropoffAvailable(pickupType) {\r\n        return vm.isPickupScheduled ||\r\n            pickupType === PICKUP_TYPES.DROPOFF || pickupType === PICKUP_TYPES.PICKUP_SCHEDULED;\r\n    }\r\n\r\n    function isPickupAvailable(pickupType) {\r\n        return pickupType === PICKUP_TYPES.PICKUP;\r\n    }\r\n\r\n    function setPickupLocationDefaultValue(data) {\r\n        const pickupLocation = data.pickupLocationType.replace('_', ' ').toUpperCase();\r\n        defaultValues.pickupLocationType = pickupLocation;\r\n    }\r\n\r\n    function setPickupInstructionsDefaultValue(data) {\r\n        if (!vm.pickupSpecialInstructions) {\r\n            vm.pickupSpecialInstructions = data.instructions;\r\n        }\r\n    }\r\n\r\n    function setPickupWindowDefaultValues(data) {\r\n        defaultValues.pickupWindow = data.pickupWindow;\r\n    }\r\n\r\n    function processPickupLocations() {\r\n        pickupService.getPickupLocations(vm.shipmentCountry)\r\n            .then(setPickupLocationsList)\r\n            .then(setPickupLocation);\r\n    }\r\n\r\n    function setPickupLocationsList(data) {\r\n        vm.pickupLocations = data;\r\n        vm.pickupLocations.push(PICKUP_LOCATION_OTHER);\r\n    }\r\n\r\n    function setPickupLocation() {\r\n        if (vm.pickupLocation) {\r\n            vm.pickupLocation = vm.pickupLocations.find(isPickupLocation);\r\n        }\r\n        vm.pickupLocation = vm.pickupLocation || vm.pickupLocations.find(isDefaultLocation);\r\n        if (!vm.isOtherPickupLocation()) {\r\n            vm.pickupLocationOtherDescription = null;\r\n        }\r\n    }\r\n\r\n    function isDefaultLocation(location) {\r\n        return defaultValues.pickupLocationType === location.name;\r\n    }\r\n\r\n    function isPickupLocation(location) {\r\n        return vm.pickupLocation.name === location.name;\r\n    }\r\n\r\n    function setPickupAddress() {\r\n        vm.pickupAddress = angular.copy(shipperAddress);\r\n    }\r\n\r\n    function resolvePickupLocationName(pickupLocation) {\r\n        const key = pickupLocation.name.toLowerCase().replace(/\\s/g, '_');\r\n        return nlsService.getTranslationSync(`shipment.pickup_${key}`);\r\n    }\r\n\r\n    function updatePickupWindow() {\r\n        const product = shipmentService.getShipmentProduct();\r\n        vm.timezoneOffset = shipmentProductsService.getShipmentTimezoneOffset();\r\n        vm.isBookByMessageShown = dateTimeService.isToday(product.pickupDate, vm.timezoneOffset);\r\n        // TODO: add real method to get 24 hour format from Support Utility\r\n        vm.amPmMarker = true;\r\n        setPickupDate(product);\r\n        setPickupTimeOptions(product);\r\n        displayPickupSlider();\r\n\r\n        if (vm.isBookByMessageShown) {\r\n            setBookByMessage();\r\n        }\r\n    }\r\n\r\n    function setPickupDate(product) {\r\n        const date = product.pickupDate;\r\n        vm.pickupDate = {\r\n            originalDate: date,\r\n            month: dateTimeService.getLocalizedMonth(date),\r\n            date: dateTimeService.getFormattedDate(date),\r\n            day: dateTimeService.getFormattedDay(date, vm.timezoneOffset),\r\n            shortDate: dateTimeService.getShortDate(date)\r\n        };\r\n    }\r\n\r\n    function setPickupTimeOptions(product) {\r\n        const {readyByTime, closeTime} = vm.pickupTime;\r\n        setPickupTime(product);\r\n        if (isValidSelectedPickupTime(readyByTime, closeTime)) {\r\n            vm.pickupTime.readyByTime = readyByTime;\r\n            vm.pickupTime.closeTime = closeTime;\r\n        }\r\n    }\r\n\r\n    function setPickupTime(product) {\r\n        const pickupTimeDefaults = defaultValues.pickupWindow;\r\n        vm.pickupTime = {\r\n            latestBooking: vm.isBookByMessageShown ? getLatestBooking(product) : null,\r\n            earliestPickup: dateTimeService.msToMin(product.pickupStartTime),\r\n            latestPickup: dateTimeService.msToMin(product.pickupEndTime),\r\n            readyByTime: getReadyByTime(product),\r\n            closeTime: dateTimeService.msToMin(product.pickupEndTime),\r\n            leadTime: dateTimeService.msToMin(product.bookingCutoffOffset),\r\n            pickupCutoffTime: dateTimeService.msToMin(product.pickupCutoffTime)\r\n        };\r\n        vm.pickupTime.minReadyByTime = vm.pickupTime.readyByTime;\r\n\r\n        if (isValidSelectedPickupTime(pickupTimeDefaults.earliestTime, pickupTimeDefaults.latestTime)) {\r\n            vm.pickupTime.readyByTime = pickupTimeDefaults.earliestTime;\r\n            vm.pickupTime.closeTime = pickupTimeDefaults.latestTime;\r\n        }\r\n    }\r\n\r\n    function getReadyByTime(product) {\r\n        return dateTimeService.getReadyByTime(product.pickupStartTime, vm.timezoneOffset, product.pickupDate);\r\n    }\r\n\r\n    function getLatestBooking(product) {\r\n        const latestBookingTime = pickupService.getLatestBooking(product);\r\n        return dateTimeService.getFormattedTime(latestBookingTime, vm.amPmMarker);\r\n    }\r\n\r\n    function isValidSelectedPickupTime(readyByTime, closeTime) {\r\n        return readyByTime && closeTime &&\r\n            readyByTime >= vm.pickupTime.earliestPickup && readyByTime <= vm.pickupTime.pickupCutoffTime &&\r\n            readyByTime >= vm.pickupTime.minReadyByTime && (closeTime - readyByTime) >= vm.pickupTime.leadTime &&\r\n            closeTime <= vm.pickupTime.latestPickup &&\r\n            closeTime >= (vm.pickupTime.pickupCutoffTime + vm.pickupTime.leadTime);\r\n    }\r\n\r\n    function displayPickupSlider() {\r\n        let rangeSliderOptions = {\r\n            min: vm.pickupTime.earliestPickup,\r\n            max: vm.pickupTime.latestPickup,\r\n            from: vm.pickupTime.readyByTime,\r\n            to: vm.pickupTime.closeTime,\r\n            type: 'double',\r\n            step: 15,\r\n            grid: true,\r\n\r\n            /*eslint-disable quote-props*/\r\n            'from_min': vm.pickupTime.minReadyByTime,\r\n            'from_max': vm.pickupTime.pickupCutoffTime,\r\n            'to_min': vm.pickupTime.pickupCutoffTime + vm.pickupTime.leadTime,\r\n            'drag_interval': true,\r\n            'min_interval': vm.pickupTime.leadTime,\r\n            'hide_min_max': true,\r\n            'grid_num': 4\r\n\r\n            /*eslint-enable quote-props*/\r\n        };\r\n\r\n        rangeSliderOptions.onFinish = function(val) {\r\n            vm.pickupTime.readyByTime = val.from;\r\n            vm.pickupTime.closeTime = val.to;\r\n        };\r\n\r\n        rangeSliderOptions.prettify = vm.getFormattedTime;\r\n\r\n        $timeout(() => {\r\n            if (displayPickupWindowCallback) {\r\n                displayPickupWindowCallback(rangeSliderOptions);\r\n                vm.isPickupSliderShown = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    function onNextClick(form, ewfFormCtrl) {\r\n        if ((form.$invalid && ewfFormCtrl.ewfValidation())) {\r\n            return;\r\n        }\r\n\r\n        if (vm.requirePackagings) {\r\n            const packagingsForm = vm.pickupPackagingsForm;\r\n\r\n            if (!packagingsForm.validate() || packagingsForm.$invalid) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        vm.nextCallback();\r\n\r\n        if (vm.isPickupRequired()) {\r\n            setPickupDataToShipmentService();\r\n        }\r\n    }\r\n\r\n    function getCurrentIncompleteData() {\r\n        vm.pickupLocation = vm.pickupLocation || {name: ''};\r\n        vm.totalPickupWeight.unit = '';\r\n        setPickupDataToShipmentService();\r\n    }\r\n\r\n    function setPickupDataToShipmentService() {\r\n        const uomKey = UOM_KEYS.find((uom) => (uom.nlsKey === vm.totalPickupWeight.unit));\r\n        const addressDetails = vm.pickupAddress.addressDetails;\r\n        const data = {\r\n            pickupDetails: {\r\n                pickupLocation: {\r\n                    name: vm.pickupAddress.name,\r\n                    company: vm.pickupAddress.company,\r\n                    pickupAddress: {\r\n                        countryCode: addressDetails.countryCode,\r\n                        addressLine1: addressDetails.addrLine1,\r\n                        postCode: addressDetails.zipOrPostCode,\r\n                        cityName: addressDetails.city,\r\n                        stateOrProvince: addressDetails.stateOrProvince\r\n                    }\r\n                },\r\n                pickupLocationType: vm.pickupLocation.name,\r\n                pickupLocationOtherDescription: vm.isOtherPickupLocation() ? vm.pickupLocationOtherDescription : '',\r\n                instructions: vm.pickupSpecialInstructions,\r\n                pickupDate: vm.pickupDate.originalDate,\r\n                pickupWindow: {\r\n                    earliestTime: dateTimeService.minToMs(vm.pickupTime.readyByTime),\r\n                    latestTime: dateTimeService.minToMs(vm.pickupTime.closeTime)\r\n                }\r\n            },\r\n            totalWeight: {\r\n                unit: uomKey ? uomKey.value : '',\r\n                value: Number(vm.totalPickupWeight.value)\r\n            },\r\n            packageList: vm.requirePackagings ? vm.packagings : null,\r\n            needCourier: vm.requirePackagings\r\n        };\r\n\r\n        shipmentService.setPickupData(data);\r\n    }\r\n\r\n    function isPickupRequired() {\r\n        return vm.howStartShipping === SHIPPING_START_TYPE.PICKUP;\r\n    }\r\n\r\n    function isDropoffRequred() {\r\n        return vm.howStartShipping === SHIPPING_START_TYPE.DROPOFF;\r\n    }\r\n\r\n    function isOtherPickupLocation() {\r\n        return vm.pickupLocation && vm.pickupLocation.name === PICKUP_LOCATION_OTHER.name;\r\n    }\r\n\r\n    function setBookByMessage() {\r\n        let bookByMessage = '';\r\n        if (vm.pickupTime.latestBooking) {\r\n            const bookByTime = vm.pickupTime.latestBooking;\r\n            const message = nlsService.getTranslationSync('shipment.pickup_latest_time_for_today');\r\n            bookByMessage = message.replace('{book_by_time}', `<b>${bookByTime}</b>`);\r\n        }\r\n\r\n        vm.bookByMessage = $sce.trustAsHtml(bookByMessage);\r\n    }\r\n\r\n    function setPickupWindowDisplayCallback(callback) {\r\n        displayPickupWindowCallback = callback;\r\n    }\r\n\r\n    function getFormattedTime(value) {\r\n        const milliseconds = dateTimeService.minToMs(value);\r\n        return dateTimeService.getFormattedTime(milliseconds, vm.amPmMarker, vm.timezoneOffset);\r\n    }\r\n\r\n    function changePickupDate() {\r\n        $location.hash('shipment-products');\r\n    }\r\n\r\n    function loadShipmentData(data) {\r\n        Object.assign(vm, shipmentService.getPickupModelData(data));\r\n    }\r\n\r\n    function onPickupTypeSelection() {\r\n        if (isPickupRequired()) {\r\n            displayPickupSlider();\r\n        }\r\n    }\r\n\r\n    function isNextButtonVisible() {\r\n        return vm.isPickupRequired() || vm.isDropoffRequred();\r\n    }\r\n\r\n    function openTSANotification() {\r\n        modalService.showDialog({\r\n            scope: $scope,\r\n            closeOnEsc: true,\r\n            windowClass: 'ngdialog-theme-default ewf-modal_width_large',\r\n            template:'<div ewf-modal nls-title=shipment.pickup_tsa_privacy_act_notice id=customsInvoiceTemplates><p>PRIVACY ACT NOTICE</p><p>49 USC 114 authorizes the collection of this information. The information you provide will be used to qualify you or verify your status as a possible \\\"known shipper\\\".</p><p>Providing this information is voluntary, however, failure to provide the information will prevent you from qualifying as a \\\"known shipper\\\". This information will be disclosed to TSA personnel and contractors or other agents including IACs in the maintenance and operation of the known shipper program.</p><p>TSA may share the information with airport operators, foreign air carriers, IACs, law enforcement agencies, and others in accordance with the Privacy Act, 5 USC Section 552a.</p><p>For additional details, see the system of records notice for Transportation Security Threat Assessment System (DHS/TSA 002) published in the Federal Register.</p><p>For additional details on the content of this notice please visit <a ng-href=\\\"http://www.tsa.gov/\\\" target=_blank>www.tsa.gov</a> or <a ng-href=\\\"http://gpoaccess.gov/\\\" target=_blank>www.gpoaccess.gov</a>.</p><footer class=\\\"area__footer a-right\\\"><a class=\\\"btn btn_success\\\" ng-click=ewfModalCtrl.close()><span nls=common.modal_ok_button_label></span></a></footer></div>'\r\n        });\r\n    }\r\n\r\n    function closeScheduledPickupNotification() {\r\n        vm.isPickupScheduled = false;\r\n    }\r\n\r\n    function editPickupAddress() {\r\n        vm.pickupAddressEditMode = true;\r\n    }\r\n\r\n    function updatePickupAddress() {\r\n        if (validatePickupAddressForm()) {\r\n            vm.pickupAddressEditMode = false;\r\n            vm.pickupAddress = angular.copy(vm.pickupAddressNew);\r\n        }\r\n    }\r\n\r\n    function validatePickupAddressForm() {\r\n        const addressForm = vm.pickupAddressForm;\r\n\r\n        return addressForm.validate() && addressForm.$valid;\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}