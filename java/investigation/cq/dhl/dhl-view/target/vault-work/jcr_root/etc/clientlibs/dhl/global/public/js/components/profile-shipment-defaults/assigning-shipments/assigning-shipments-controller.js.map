{"version":3,"sources":["components/profile-shipment-defaults/assigning-shipments/assigning-shipments-controller.js"],"names":[],"mappings":";;;qBAKwB,4BAA4B;;AAFpD,gCAA4B,CAAC,OAAO,GAAG,CAAC,gBAAgB,EAAE,mBAAmB,CAAC,CAAC;;AAEhE,aAAS,4BAA4B,CAAC,cAAc,EAAE,iBAAiB,EAAE;AACpF,YAAM,EAAE,GAAG,IAAI,CAAC;AAChB,YAAM,OAAO,GAAG,6CAA6C,CAAC;AAC9D,YAAM,aAAa,GAAG,4DAA4D,CAAC;AACnF,YAAM,yBAAyB,GAAG,oBAAoB,CAAC;;AAEvD,YAAI,cAAc,YAAA,CAAC;AACnB,YAAI,sBAAsB,GAAG,IAAI,CAAC;;AAElC,cAAM,CAAC,MAAM,CAAC,EAAE,EAAE;AACd,gBAAI,EAAJ,IAAI;;AAEJ,4BAAgB,EAAE,EAAE;AACpB,+BAAmB,EAAE,EAAE;;AAEvB,uBAAW,EAAX,WAAW;AACX,sBAAU,EAAV,UAAU;;AAEV,yBAAa,EAAb,aAAa;AACb,wBAAY,EAAZ,YAAY;SACf,CAAC,CAAC;;AAEH,iBAAS,IAAI,GAAG;AACZ,0BAAc,GAAG,iBAAiB,CAAC,eAAe,CAAC,SAAS,CAAC,KAAK,yBAAyB,CAAC;;AAE5F,0BAAc,CAAC,cAAc,CAAC,OAAO,CAAC,CACjC,IAAI,CAAC,qBAAqB,CAAC,CAAC;;AAEjC,0BAAc,CAAC,cAAc,CAAC,aAAa,CAAC,CACvC,IAAI,CAAC,UAAC,QAAQ,EAAK;AAChB,kBAAE,CAAC,mBAAmB,GAAG,QAAQ,CAAC;aACrC,CAAC,CAAC;SACV;;AAED,iBAAS,qBAAqB,CAAC,gBAAgB,EAAE;AAC7C,cAAE,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;AACvC,kCAAsB,GAAG,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;SAC9D;;AAED,iBAAS,WAAW,GAAG;AACnB,kCAAsB,GAAG,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,CAAC;;AAE3D,0BAAc,GAAG,IAAI,CAAC;SACzB;;AAED,iBAAS,WAAW,GAAG;AACnB,0BAAc,GAAG,KAAK,CAAC;SAC1B;;AAED,iBAAS,UAAU,GAAG;AAClB,mBAAO,cAAc,CAAC;SACzB;;AAED,iBAAS,aAAa,GAAG;AACrB,iCAAqB,CAAC,sBAAsB,CAAC,CAAC;;AAE9C,uBAAW,EAAE,CAAC;SACjB;;AAED,iBAAS,YAAY,GAAG;AACpB,0BAAc,CAAC,aAAa,CAAC,OAAO,EAAE,EAAE,CAAC,gBAAgB,CAAC,CACrD,IAAI,CAAC,qBAAqB,CAAC,CAC3B,IAAI,CAAC,WAAW,CAAC,CAAC;SAC1B;KACJ","file":"components/profile-shipment-defaults/assigning-shipments/assigning-shipments-controller.js","sourcesContent":["import './../../../services/ewf-crud-service';\r\nimport './../../../services/navigation-service';\r\n\r\nAssigningShipmentsController.$inject = ['ewfCrudService', 'navigationService'];\r\n\r\nexport default function AssigningShipmentsController(ewfCrudService, navigationService) {\r\n    const vm = this;\r\n    const dataUrl = '/api/myprofile/shipment/assignment/defaults';\r\n    const supportingUrl = '/api/myprofile/shipment/assignment/notifications/intervals';\r\n    const assigningShipmentsSection = 'assigningShipments';\r\n\r\n    let isEditModeFlag;\r\n    let assigningOptionsBackup = null;\r\n\r\n    Object.assign(vm, {\r\n        init,\r\n\r\n        assigningOptions: {},\r\n        notificationOptions: {},\r\n\r\n        setEditMode,\r\n        isEditMode,\r\n\r\n        cancelChanges,\r\n        applyChanges\r\n    });\r\n\r\n    function init() {\r\n        isEditModeFlag = navigationService.getParamFromUrl('section') === assigningShipmentsSection;\r\n\r\n        ewfCrudService.getElementList(dataUrl)\r\n            .then(applyAssigningOptions);\r\n\r\n        ewfCrudService.getElementList(supportingUrl)\r\n            .then((response) => {\r\n                vm.notificationOptions = response;\r\n            });\r\n    }\r\n\r\n    function applyAssigningOptions(assigningOptions) {\r\n        vm.assigningOptions = assigningOptions;\r\n        assigningOptionsBackup = angular.copy(vm.assigningOptions);\r\n    }\r\n\r\n    function setEditMode() {\r\n        assigningOptionsBackup = angular.copy(vm.assigningOptions);\r\n\r\n        isEditModeFlag = true;\r\n    }\r\n\r\n    function setViewMode() {\r\n        isEditModeFlag = false;\r\n    }\r\n\r\n    function isEditMode() {\r\n        return isEditModeFlag;\r\n    }\r\n\r\n    function cancelChanges() {\r\n        applyAssigningOptions(assigningOptionsBackup);\r\n\r\n        setViewMode();\r\n    }\r\n\r\n    function applyChanges() {\r\n        ewfCrudService.changeElement(dataUrl, vm.assigningOptions)\r\n            .then(applyAssigningOptions)\r\n            .then(setViewMode);\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}