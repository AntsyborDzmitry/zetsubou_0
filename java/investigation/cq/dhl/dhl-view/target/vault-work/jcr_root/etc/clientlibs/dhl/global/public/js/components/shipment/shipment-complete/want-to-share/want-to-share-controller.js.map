{"version":3,"sources":["components/shipment/shipment-complete/want-to-share/want-to-share-controller.js"],"names":[],"mappings":";;;qBAMwB,qBAAqB;;AAF7C,yBAAqB,CAAC,OAAO,GAAG,CAAC,QAAQ,EAAE,cAAc,EAAE,mBAAmB,EAAE,oBAAoB,CAAC,CAAC;;AAEvF,aAAS,qBAAqB,CAAC,MAAM,EAAE,YAAY,EAAE,iBAAiB,EAAE,kBAAkB,EAAE;AACvG,YAAM,EAAE,GAAG,IAAI,CAAC;;AAEhB,UAAE,CAAC,eAAe,GAAG,eAAe,CAAC;AACrC,UAAE,CAAC,YAAY,GAAG,YAAY,CAAC;;AAE/B,YAAM,UAAU,GAAG,iBAAiB,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;;AAEnE,YAAI,WAAW,YAAA,CAAC;;AAEhB,UAAE,CAAC,aAAa,GAAG;AACf,0BAAc,EAAE,KAAK;AACrB,iBAAK,EAAE,KAAK;AACZ,oCAAwB,EAAE,KAAK;AAC/B,mBAAO,EAAE,KAAK;AACd,0BAAc,EAAE,KAAK;SACxB,CAAC;;AAEF,UAAE,CAAC,WAAW,GAAG;AACb,uBAAW,EAAE,EAAE;AACf,uBAAW,EAAE,EAAE;AACf,mBAAO,EAAE,EAAE;AACX,mBAAO,EAAE,EAAE;AACX,mBAAO,EAAE;AACL,8BAAc,EAAE,IAAI;AACpB,wCAAwB,EAAE,IAAI;aACjC;SACJ,CAAC;;AAEF,0BAAkB,CAAC,wBAAwB,CAAC,UAAU,CAAC,CAClD,IAAI,CAAC,UAAC,aAAa,EAAK;AACrB,cAAE,CAAC,aAAa,GAAG,aAAa,CAAC;SACpC,CAAC,CAAC;;AAEP,iBAAS,eAAe,GAAG;AACvB,8BAAkB,CAAC,cAAc,CAAC,UAAU,CAAC,CACxC,IAAI,CAAC,UAAC,WAAW,EAAK;AACnB,kBAAE,CAAC,WAAW,GAAG,WAAW,CAAC;AAC7B,oBAAI,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE;AAC1C,sBAAE,CAAC,WAAW,CAAC,WAAW,GAAG,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACnE;;AAED,2BAAW,GAAG,YAAY,CAAC,UAAU,CAAC;AAClC,8BAAU,EAAE,IAAI;AAChB,yBAAK,EAAE,MAAM;AACb,4BAAQ,EAAC,ivEAAivE;iBAC7vE,CAAC,CAAC;aACN,CAAC,CAAC;SAEV;;AAED,iBAAS,YAAY,GAAG;AACpB,8BAAkB,CAAC,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,aAAa,CAAC,CACxE,IAAI,CAAC,YAAM;AACR,2BAAW,CAAC,KAAK,EAAE,CAAC;aACvB,CAAC,CAAC;SACV;KAEJ","file":"components/shipment/shipment-complete/want-to-share/want-to-share-controller.js","sourcesContent":["import './want-to-share-service';\r\nimport './../../../../services/navigation-service';\r\nimport './../../../../services/modal/modal-service';\r\n\r\nWantToShareController.$inject = ['$scope', 'modalService', 'navigationService', 'wantToShareService'];\r\n\r\nexport default function WantToShareController($scope, modalService, navigationService, wantToShareService) {\r\n    const vm = this;\r\n\r\n    vm.openShareDialog = openShareDialog;\r\n    vm.shareDetails = shareDetails;\r\n\r\n    const shipmentId = navigationService.getParamFromUrl('shipmentId');\r\n\r\n    let modalWindow;\r\n\r\n    vm.shareDefaults = {\r\n        trackingNumber: false,\r\n        label: false,\r\n        pickupConfirmationNumber: false,\r\n        receipt: false,\r\n        customsInvoice: false\r\n    };\r\n\r\n    vm.sharingInfo = {\r\n        toAddresses: [],\r\n        fromAddress: '',\r\n        subject: '',\r\n        message: '',\r\n        details: {\r\n            trackingNumber: null,\r\n            pickupConfirmationNumber: null\r\n        }\r\n    };\r\n\r\n    wantToShareService.getShipmentShareDefaults(shipmentId)\r\n        .then((shareDefaults) => {\r\n            vm.shareDefaults = shareDefaults;\r\n        });\r\n\r\n    function openShareDialog() {\r\n        wantToShareService.getShareFields(shipmentId)\r\n            .then((shareFields) => {\r\n                vm.sharingInfo = shareFields;\r\n                if (angular.isArray(shareFields.toAddresses)) {\r\n                    vm.sharingInfo.toAddresses = shareFields.toAddresses.join(', ');\r\n                }\r\n\r\n                modalWindow = modalService.showDialog({\r\n                    closeOnEsc: true,\r\n                    scope: $scope,\r\n                    template:'<div ewf-modal nls-title=shipment.shipment_complete_share_shipping_details><div class=ewf-modal__body><form ewf-form id=formShareShippingDetails><div id=shareDetails><p nls=shipment.shipment_complete_share_separate_with_comma></p><div class=field-wrapper><label class=label nls=shipment.shipment_complete_share_to></label> <input type=text ng-model=wtsCtrl.sharingInfo.toAddresses name=to class=\\\"input input_width_full\\\" placeholder=name@email.com></div><div class=field-wrapper><label class=label nls=shipment.shipment_complete_share_from></label> <input type=text ng-model=wtsCtrl.sharingInfo.fromAddress name=from class=\\\"input input_width_full\\\" value=name@email.com></div><div class=field-wrapper><label class=label nls=shipment.shipment_complete_share_subject></label> <input type=text ng-model=wtsCtrl.sharingInfo.subject name=subject class=\\\"input input_width_full\\\" value=\\\"DHL EXPRESS Shipping Details\\\"></div><div class=field-wrapper><label class=label nls=shipment.shipment_complete_share_message></label> <textarea ng-model=wtsCtrl.sharingInfo.message nls=shipment.shipment_complete_share_message.placeholder name=message class=\\\"input input_width_full\\\">\\r\\n                    </textarea></div><h3 nls=shipment.shipment_complete_shipping_details></h3><table class=\\\"table table_zebra a-left full-width\\\"><tbody><tr ng-if=wtsCtrl.shareDefaults.trackingNumber><th nls=shipment.shipment_complete_share_tracking_number></th><td ng-bind=wtsCtrl.sharingInfo.details.trackingNumber></td></tr><tr ng-if=wtsCtrl.shareDefaults.pickupConfirmationNumber><th nls=shipment.shipment_complete_share_pickup_confirmation_number></th><td ng-bind=wtsCtrl.sharingInfo.details.pickupConfirmationNumber></td></tr><tr ng-if=wtsCtrl.shareDefaults.label><th nls=shipment.shipment_complete_share_waybill></th><td>Attachment</td></tr><tr ng-if=wtsCtrl.shareDefaults.customsInvoice><th nls=shipment.shipment_complete_share_customs_invoice></th><td>Attachment</td></tr><tr ng-if=wtsCtrl.shareDefaults.receipt><th nls=shipment.shipment_complete_share_receipt></th><td>Attachment</td></tr></tbody></table></div></form></div><footer class=ewf-modal__footer><button class=\\\"btn btn_success right\\\" data-ng-click=wtsCtrl.shareDetails(); nls=shipment.shipment_complete_share_details></button></footer></div>'\r\n                });\r\n            });\r\n\r\n    }\r\n\r\n    function shareDetails() {\r\n        wantToShareService.shareDetails(shipmentId, vm.sharingInfo, vm.shareDefaults)\r\n            .then(() => {\r\n                modalWindow.close();\r\n            });\r\n    }\r\n\r\n}\r\n"],"sourceRoot":"/source/"}