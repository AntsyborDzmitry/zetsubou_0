{"version":3,"sources":["components/profile-shipment-defaults/delivery-options/delivery-options-controller.js"],"names":[],"mappings":"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","file":"components/profile-shipment-defaults/delivery-options/delivery-options-controller.js","sourcesContent":["import './delivery-options-service';\r\nimport './../../../services/navigation-service';\r\n\r\nDeliveryOptionsController.$inject = ['deliveryOptionsService', 'navigationService'];\r\n\r\nexport default function DeliveryOptionsController(\r\n    deliveryOptionsService,\r\n    navigationService) {\r\n\r\n    const vm = this;\r\n    const deliveryOptionSection = 'deliveryOptions';\r\n    let deliveryDefaults;\r\n\r\n    Object.assign(vm, {\r\n        selectedOption: {},\r\n        editMode: false,\r\n        options: {},\r\n        saveDeliveryOptions,\r\n        init,\r\n        resetShipmentType,\r\n        toggleEditMode,\r\n        onCountrySelect,\r\n        setShipperCountry,\r\n        resetDefaults,\r\n        isDocumentType,\r\n        setDeliveryOption,\r\n        setSelectedValue\r\n    });\r\n\r\n    function init() {\r\n        const section = navigationService.getParamFromUrl('section');\r\n        vm.editMode = section === deliveryOptionSection;\r\n        deliveryOptionsService.getData()\r\n            .then((optionsData) => {\r\n                Object.assign(vm, optionsData);\r\n                vm.connected = true;\r\n                deliveryDefaults = angular.copy(optionsData);\r\n                vm.setSelectedValue();\r\n            });\r\n    }\r\n\r\n    function saveDeliveryOptions() {\r\n        if (vm.shipperCountry === '') {\r\n            vm.options.shippingCountry = '';\r\n        }\r\n\r\n        vm.options.selectedDeliveryOptionsKey = vm.selectedOption && vm.selectedOption.key || '';\r\n        deliveryOptionsService.saveOptions(vm.options)\r\n            .then((optionsData) => deliveryDefaults = angular.copy(optionsData))\r\n            .finally(() => vm.editMode = false);\r\n    }\r\n\r\n    function resetShipmentType() {\r\n        vm.options.shipmentType = 'NONE';\r\n    }\r\n\r\n    function toggleEditMode() {\r\n        vm.editMode = !vm.editMode;\r\n    }\r\n\r\n    function onCountrySelect(country) {\r\n        vm.options.shippingCountry = country.code2;\r\n    }\r\n\r\n    function setShipperCountry() {\r\n        const comparator = (country) => country.code2 === vm.options.shippingCountry;\r\n        vm.shipperCountry = vm.countryList.find(comparator);\r\n    }\r\n\r\n    function setDeliveryOption() {\r\n        const comparator = (deliveryOption) => deliveryOption.key === vm.options.selectedDeliveryOptionsKey;\r\n        vm.selectedOption = vm.options.deliveryOptions.find(comparator);\r\n    }\r\n\r\n    function resetDefaults() {\r\n        vm.editMode = false;\r\n        Object.assign(vm, angular.copy(deliveryDefaults));\r\n        vm.setSelectedValue();\r\n    }\r\n\r\n    function isDocumentType() {\r\n        return vm.options.shipmentType === 'DOCUMENT';\r\n    }\r\n\r\n    function setSelectedValue() {\r\n        vm.setShipperCountry();\r\n        vm.setDeliveryOption();\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}